define("controls/global/branch-selector/qp-branch-selector-3d",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator","apps/enhance/services/api-client","apps/enhance/services/control-helper","plugins/happeded-on-body","apps/enhance/services/mark-highlights"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpBranchSelector3dCustomElement=void 0;var d={ArrowDown:1,ArrowUp:-1,Down:1,PageDown:7,PageUp:-7,Up:-1};var c=function(){function e(e,t,r,n){this.element=e;this.apiClient=t;this.taskQueue=r;this.eventAggregator=n;this.highlightedIndex=undefined;this.autoExpandIfLessThen=3;this.treeOpen=false;this.loadingStatus="in-sync"}e.prototype.configChanged=function(){};e.prototype.editModeChanged=function(e,t){if(e){if(!this.branches){this.loadBranches()}this.selectAllText()}};e.prototype.loadBranches=function(){return r.__awaiter(this,void 0,void 0,(function(){var e=this;return r.__generator(this,(function(t){if(!this.branchesPromise){this.loadingStatus="loading";this.branchesPromise=this.apiClient.getBranchTree({dac:this.config.dac,screenId:a.getScreenID(),view:this.config.view,graph:this.config.graph,screenStateId:this.config.screenStateId}).then((function(t){e.branches=t.data;e.loadingStatus="in-sync";e.taskQueue.flushMicroTaskQueue()}))}return[2,this.branchesPromise]}))}))};e.prototype.toggleSelector=function(e){var t=this;e.preventDefault();e.stopImmediatePropagation();this.inputControl.focus();if(this.treeOpen){this.hide();return}this.show();if(!this.highlightedIndex){this.search()}if(this.highlightedIndex!==undefined&&this.highlightedIndex>=0){var r=this.highlightedIndex;this.taskQueue.flushTaskQueue();this.taskQueue.queueTask((function(){return t.scrollNodeIntoView(r)}))}};e.prototype.select=function(e,t){var r=this;if(e.CanSelect){this.value={id:e.AcctCD,text:e.AcctName};this.updateToolTip();this.hide();this.taskQueue.queueTask((function(){r.selectAllText();r.filter=""}))}t===null||t===void 0?void 0:t.preventDefault();t===null||t===void 0?void 0:t.stopImmediatePropagation();t===null||t===void 0?void 0:t.stopPropagation()};e.prototype.handleKey=function(e){var t=d[e.key];if(t!==undefined&&this.treeOpen!==e.altKey){e.preventDefault();e.stopImmediatePropagation();this.moveCursor(t)}switch(e.key){case"Enter":if(this.highlightedIndex!==undefined&&this.flatStructure[this.highlightedIndex]){this.select(this.flatStructure[this.highlightedIndex])}break;case"Esc":case"Escape":this.hide();e.preventDefault();e.stopImmediatePropagation();break;default:break}return true};e.prototype.moveCursor=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:if(!!this.treeOpen)return[3,3];this.show();if(!(!Array.isArray(this.flatStructure)||this.flatStructure.length===0))return[3,2];return[4,this.loadBranches()];case 1:r.sent();if(!Array.isArray(this.flatStructure)||this.flatStructure.length===0){return[2]}return[3,3];case 2:if(typeof this.highlightedIndex==="number"&&this.highlightedIndex>=0){return[2]}r.label=3;case 3:if(typeof this.highlightedIndex!=="number"||this.highlightedIndex<0){this.selectFirst()}else{t=this.highlightedIndex+e;n=e>0?1:-1;i=(e>0?this.flatStructure.length:0)+n;if(t<0){t=0}if(t>=this.flatStructure.length){t=this.flatStructure.length-1}for(;t!==i;t+=n){if(this.flatStructure[t].CanSelect){this.highlightedIndex=t;break}}}this.taskQueue.flushTaskQueue();this.scrollNodeIntoView(this.highlightedIndex||0);return[2]}}))}))};e.prototype.selectFirst=function(e){var t=this;this.highlightedIndex=undefined;if(e===undefined){if(this.value&&this.value.id){var r=this.flatStructure.filter((function(e){return e.AcctCD==t.value.id}));if(r.length>1){if(r[0].PrimaryGroupID){var n=this.flatStructure.findIndex((function(e){return e.AcctCD==t.value.id&&e.PrimaryGroupID==e.ParentBAccountID}));this.highlightedIndex=n===-1?0:n}else if(r[0].Type=="branch"){var i=this.flatStructure.findIndex((function(e){return e.BAccountID==r[0].ParentBAccountID&&e.ParentBAccountID==e.PrimaryGroupID}));var n=this.flatStructure.findIndex((function(e,r){return r>i&&e.AcctCD==t.value.id}));this.highlightedIndex=n===-1?0:n}else{var n=this.flatStructure.findIndex((function(e){return e.AcctCD==t.value.id}));this.highlightedIndex=n===-1?0:n}}else{var n=this.flatStructure.findIndex((function(e){return e.AcctCD==t.value.id}));this.highlightedIndex=n===-1?0:n}}}else{for(var o=0;o<this.flatStructure.length;o++){if(this.flatStructure[o].CanSelect){if(e===""||this.flatStructure[o].displaySegments.length>1){this.highlightedIndex=o;break}}}}if(this.highlightedIndex!==undefined&&this.highlightedIndex>=0){var a=this.highlightedIndex;this.taskQueue.flushTaskQueue();this.taskQueue.queueTask((function(){return t.scrollNodeIntoView(a)}))}};e.prototype.search=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:this.show();this.filter=e;if(!!this.branches)return[3,2];return[4,this.loadBranches()];case 1:t.sent();t.label=2;case 2:this.selectFirst(e);return[2]}}))}))};e.prototype.toolTipShown=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){this.updateToolTip();return[2]}))}))};e.prototype.updateToolTip=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,a;var s=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(!this.value||!this.value.id){this.toolTip=[];return[2]}if(!!this.branches)return[3,2];this.toolTip=[];this.toolTip.push(""+this.value.id+(this.value.text?" - "+this.value.text:""));return[4,this.loadBranches()];case 1:r.sent();r.label=2;case 2:e=this.value.id;if(e){t=-1;n=[];do{t=this.flatStructure.findIndex((function(e,r){return r>t&&e.AcctCD===s.value.id}));if(t>-1){n.push(t)}}while(t!==-1);for(t=0;t<n.length;t++){i=n[t];o=i>0&&this.flatStructure[i].level>0?i-1:-1;if(o>0){for(;o>0;o--){if(this.flatStructure[o].level<this.flatStructure[i].level)break}}a=o>0&&this.flatStructure[o].level>0?o-1:-1;if(a>0){for(;a>0;a--){if(this.flatStructure[a].level<this.flatStructure[o].level)break}}if((this.flatStructure[i].ParentBAccountID===this.flatStructure[i].PrimaryGroupID||this.flatStructure[i].PrimaryGroupID===undefined)&&(o<0||this.flatStructure[o].ParentBAccountID===this.flatStructure[o].PrimaryGroupID||this.flatStructure[o].PrimaryGroupID===undefined)&&(a<0||this.flatStructure[a].ParentBAccountID===this.flatStructure[a].PrimaryGroupID||this.flatStructure[a].PrimaryGroupID===undefined)){this.toolTip=[];if(a>-1){this.toolTip.push(""+this.flatStructure[a].AcctCD+(this.flatStructure[a].AcctName?" - "+this.flatStructure[a].AcctName:""))}if(o>-1){this.toolTip.push(""+this.flatStructure[o].AcctCD+(this.flatStructure[o].AcctName?" - "+this.flatStructure[o].AcctName:""))}this.toolTip.push(""+this.value.id+(this.value.id?" - "+this.value.text:""));break}}}return[2]}}))}))};e.prototype.onBlur=function(){var e=this;var t,r,n;if(this.inputControl.value.trim()===""){this.value={id:"",text:""}}else{if(this.inputControl.value.trim()!==((r=(t=this.value)===null||t===void 0?void 0:t.id)===null||r===void 0?void 0:r.trim())){var i=(n=this.flatStructure)===null||n===void 0?void 0:n.find((function(t){return t.AcctCD.trim().toLowerCase()===e.inputControl.value.trim().toLowerCase()}));if(i){this.value={id:i.AcctCD,text:i.AcctName}}else{this.value={id:this.inputControl.value,text:""}}}}this.filter="";this.hide();return true};e.prototype.findParent=function(e,t){var r,n;if(!e){return undefined}for(var i=0;i<t.length;i++){if((r=t[i].Children)===null||r===void 0?void 0:r.find((function(t){return t.AcctCD===e.AcctCD&&t.PrimaryGroupID===t.ParentBAccountID}))){return t[i]}if((n=t[i].Children)===null||n===void 0?void 0:n.find((function(t){return t.AcctCD===e.AcctCD}))){return t[i]}else if(t[i].Children){var o=this.findParent(e,t[i].Children);if(o){return o}}}return undefined};e.prototype.findFilteredParent=function(e){var t;for(var r=0;r<this.filtered.length;r++){var n=this.filtered[r];if(n.BAccountID===e.BAccountID&&n.ParentBAccountID===e.ParentBAccountID){return n}else if((t=n.Children)===null||t===void 0?void 0:t.length){for(var i=0;i<n.Children.length;i++){var o=n.Children[i];if(o.BAccountID===e.BAccountID&&o.ParentBAccountID===e.ParentBAccountID){return o}}}}};e.prototype.toggleExpand=function(e,t){var n;var i=this.findFilteredParent(e);if(i){var o=this.findParent(i,this.filtered);i.expand=!i.expand;e.expand=i.expand;var a=this.flatStructure.indexOf(e)+1;if(e.expand===false){var s=this.flatStructure.findIndex((function(t,r){return!(r<a||t.level>e.level)}));if(s===-1){s=this.flatStructure.length}var l=s-a;if(l>0&&a<this.flatStructure.length){this.flatStructure.splice(a,l)}}else{var d=false;if(o){d=o.Children.indexOf(i)===o.Children.length-1}var c=this.flatten(i.Children,i.level+1,d);(n=this.flatStructure).splice.apply(n,r.__spreadArrays([a,0],c))}}t.stopPropagation();t.stopImmediatePropagation()};e.prototype.scrollNodeIntoView=function(e){var t,r;var n;n="nearest";if(e===((t=this.flatStructure)===null||t===void 0?void 0:t.length)-1){n="start"}var i=(r=this.treeView)===null||r===void 0?void 0:r.querySelectorAll(".branch-selector__node")[e];if(i){var o="scrollBehavior"in document.documentElement.style?{block:n}:undefined;i.scrollIntoView(o)}};e.prototype.unsubscribeFromMouseDownOnDocument=function(){var e;(e=this.documentMouseDownSubscription)===null||e===void 0?void 0:e.dispose();this.documentMouseDownSubscription=undefined};e.prototype.show=function(){var e=this;this.documentMouseDownSubscription=this.eventAggregator.subscribe(s.MOUSE_DOWN_REACHED_BODY,(function(){return e.hide()}));this.treeOpen=true};e.prototype.hide=function(){this.unsubscribeFromMouseDownOnDocument();this.treeOpen=false};e.prototype.ignoreMouseDown=function(e){e.preventDefault();e.stopImmediatePropagation()};e.prototype.selectAllText=function(){var e=this.inputControl.value.length;this.inputControl.setSelectionRange(0,e)};e.prototype.highlight=function(e){this.highlightedNode=e;if(e.CanSelect){this.highlightedIndex=this.flatStructure.indexOf(e)}};e.prototype.flatten=function(e,t,r,n){var i=this;var o,a,s;if(n===void 0){n=[]}for(var l=0;l<e.length;l++){var d=e[l];d.level=t;d.lastChild=r;var c=this.value&&this.value.id&&((o=d.Children)===null||o===void 0?void 0:o.find((function(e){var t;return e.AcctCD==i.value.id||((t=e.Children)===null||t===void 0?void 0:t.find((function(e){return e.AcctCD==i.value.id})))})));var u=!!c;if(u&&(c===null||c===void 0?void 0:c.PrimaryGroupID)&&c.PrimaryGroupID!==c.ParentBAccountID){u=false}d.expand=d.expand||((a=d.Children)===null||a===void 0?void 0:a.length)&&((s=d.Children)===null||s===void 0?void 0:s.length)<=this.autoExpandIfLessThen||u;n.push(d);if(d.expand&&d.Children){d.expand=true;this.flatten(d.Children,t+1,l===e.length-1,n)}}return n};e.prototype.conditionsChanged=function(){if(!Array.isArray(this.branches)){return}function e(t,n){var i;var o=[];for(var a=0;a<t.length;a++){var s=t[a];var d=r.__assign({},s),c=d.AcctCD,u=d.AcctName,p=d.BAccountID,h=d.ParentBAccountID,g=d.CanSelect,f=d.Type,v=d.PrimaryGroupID;var b=((i=s.Children)===null||i===void 0?void 0:i.length)?e(s.Children,n):[];if(b.length||c.toLocaleLowerCase().indexOf(n)>-1||u.toLocaleLowerCase().indexOf(n)>-1){o.push({AcctCD:c,AcctName:u,BAccountID:p,Children:b.length?b:undefined,ParentBAccountID:h,PrimaryGroupID:v,Type:b.length?f:"branch",CanSelect:g,displaySegments:l.markHighlights(n,c+" - "+u)})}}return o}this.highlightedIndex=undefined;var t=this.filter&&this.filter.toLocaleLowerCase()||"";this.filtered=e(this.branches,t);var n=this.flatten(this.filtered,0,this.filtered.length===1);this.flatStructure=n};r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"value",void 0);r.__decorate([n.observable({changeHandler:"conditionsChanged"}),r.__metadata("design:type",Object)],e.prototype,"branches",void 0);r.__decorate([n.observable({changeHandler:"conditionsChanged"}),r.__metadata("design:type",Object)],e.prototype,"filter",void 0);r.__decorate([n.observable,r.__metadata("design:type",Object)],e.prototype,"autoExpandIfLessThen",void 0);e=r.__decorate([n.customElement("qp-branch-selector"),n.autoinject,r.__metadata("design:paramtypes",[Element,o.ApiClient,n.TaskQueue,i.EventAggregator])],e);return e}();t.QpBranchSelector3dCustomElement=c}));define("text!controls/global/branch-selector/qp-branch-selector-3d.html",[],(function(){return'<template class="branch-selector ${editMode?\'edit-mode\':\'\'}" id="${config.id}"><require from="./qp-branch-selector.css"></require><div class="editor ${config.class} ${editMode?\'focus\':\'\'} ${(config.readOnly || config.enabled === false) ?\'ReadOnly\':\'\'}" style="display:flex;padding:0;position:relative;direction:ltr" ref="rectControl"><input id="${config.id}_text" name="${config.name}" tabindex="${config.tabIndex}" value.to-view="value.id.trim()" ref="inputControl" blur.trigger="onBlur()" input.delegate="search(inputControl.value)" keydown.capture="handleKey($event)" style="margin:0;border:0;flex:1 0 auto;padding:0 4px 0 6px" autocomplete="off" autocorrect="off" focus.from-view="editMode" enabled.bind="config.enabled === false ?  false:null  & attr" readonly="${(config.readOnly || config.enabled===false) ? true : null}"><div class="branch-selector__display-text" if.bind="value && value.id">${[value.id]}${value.text?\' - \'+value.text:\'\'}</div><button type="button" show.bind="config.enabled!== false" mousedown.trigger="toggleSelector($event)" class="sprite-icon branch-selector__button" tabindex="-1"><i class="control-icon control-ArrowDown"></i></button><qp-loader-indicator if.bind="loadingStatus != \'in-sync\'" style="position:absolute;bottom:0;left:0;right:0" loading-state.bind="loadingStatus"></qp-loader-indicator><qp-tooltip if.bind="!treeOpen && toolTip && toolTip.length" target.bind="element" on-show.call="toolTipShown()"><div repeat.for="t of toolTip" class="tooltip-level branch-level-${$index}">${t}</div></qp-tooltip></div><div class="branch-selector__branch-tree" if.bind="branches && treeOpen" glue-to.bind="rectControl" ref="treeView" style="max-height:210px;max-width:610px" mousedown.capture="ignoreMouseDown($event)"><div repeat.for="n of flatStructure" node.bind="n" click.delegate="select(n,$event)" mouseenter.capture="highlight(n,$event)" class="branch-selector__node branch-selector__${n.Type} ${highlightedIndex == $index?\'highlight\':\'\'} nesting-level-${n.level} ${b.CanSelect?\'can-select\':\'\'} ${n.lastChild?\'parent-last-child\':\'\'}"><qp-icon class="group-icon" if.bind="n.Type==\'group\'" imagesrc="${n.expand?\'control@DropDownH\':\'control@SubMenu\'}" click.delegate="toggleExpand(n,$event)"></qp-icon><qp-icon class="company-icon" if.bind="n.Type==\'organization\'" imagesrc="${n.expand?\'ac@keyboard_arrow_down\':\'ac@keyboard_arrow_right\'}" click.delegate="toggleExpand(n,$event)"></qp-icon><template repeat.for="s of n.displaySegments"><mark if.bind="s.highlight">${s.text}</mark><template else>${s.text}</template></template></div></div></template>'}));define("text!controls/global/branch-selector/qp-branch-selector.css",[],(function(){return".qp-branch-selector,\r\n.qp-branch-selector * {\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n}\r\n\r\nqp-branch-selector {\r\n\tdisplay: block;\r\n}\r\n\r\nqp-branch-selector qp-loader-indicator {\r\n\tpointer-events: none;\r\n}\r\n\r\n.branch-selector input {\r\n\tcolor: transparent;\r\n}\r\n\r\n.branch-selector__display-text {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 26px;\r\n\theight: 100%;\r\n\tpointer-events: none;\r\n\r\n\tmargin: 0;\r\n\tborder: 0;\r\n\tpadding: 0 4px 0 6px;\r\n\tline-height: 24px;\r\n\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}\r\n.rtl .branch-selector__display-text {\r\n\tright:0;\r\n\tleft:26px;\r\n\tpadding: 0 6px 0 4px;\r\n}\r\n\r\n.branch-selector__button {\r\n\tbackground: #fff;\r\n\tborder: 0;\r\n\twidth: 18px;\r\n\tcolor: rgba(0, 0, 0, .64);\r\n\tcursor: pointer;\r\n\tpadding: 5px 4px;\r\n}\r\n\r\n\r\n.edit-mode .branch-selector__display-text {\r\n\tvisibility: hidden;\r\n}\r\n\r\n.edit-mode input {\r\n\tcolor: initial;\r\n}\r\n\r\n.branch-selector__branch-tree {\r\n\twidth: auto;\r\n\toverflow-y: auto;\r\n\tposition: absolute;\r\n\tz-index: 1000;\r\n\tbackground: white;\r\n}\r\n\r\n.branch-selector__node {\r\n\tdisplay: block;\r\n\tmin-height: 18px;\r\n\tpadding: 5px 6px;\r\n\tfont-size: 13px;\r\n\twhite-space: nowrap;\r\n\ttext-overflow: ellipsis;\r\n\tposition: relative;\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n\theight: 24px;\r\n}\r\n\r\n.branch-selector__node.nesting-level-0 {\r\n\tpadding-left: 20px;\r\n}\r\n\r\n.branch-selector__node.nesting-level-0 {\r\n\tpadding-left: 20px;\r\n}\r\n.branch-selector__node.nesting-level-1 {\r\n\tpadding-left: 40px;\r\n}\r\n\r\n.branch-selector__node.nesting-level-2 {\r\n\tpadding-left: 60px;\r\n}\r\n\r\n\r\n.rtl .branch-selector__node.nesting-level-0 {\r\n\tpadding-left: 5px;\r\n\tpadding-right: 20px;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-0 {\r\n\tpadding-left: 5px;\r\n\tpadding-right: 20px;\r\n}\r\n.rtl .branch-selector__node.nesting-level-1 {\r\n\tpadding-left: 5px;\r\n\tpadding-right: 40px;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-2 {\r\n\tpadding-left: 5px;\r\n\tpadding-right: 60px;\r\n}\r\n\r\n.branch-selector__group {\r\n\tfont-weight: bold;\r\n}\r\n\r\n.branch-selector__group .control-icon {\r\n\tfont-weight: normal;\r\n\t/* font-size: 15px; */\r\n}\r\n\r\n/* .branch-selector__node.nesting-level-1::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tleft: 20px;\r\n\t\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n} */\r\n\r\n.branch-selector__node.nesting-level-1+.branch-selector__node.nesting-level-2::before {\r\n\theight: 60%;\r\n\ttop: -15%;\r\n}\r\n\r\n.branch-selector__node.nesting-level-2::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tleft: 45px;\r\n\t/* left: 0;//2.35em; */\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n.branch-selector__node.nesting-level-1::before {\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tleft: 25px;\r\n\t/* left: 0;//2.35em; */\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-2::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tright: 45px;\r\n\t/* left: 0;//2.35em; */\r\n\tleft:unset;\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-left: 0;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-right: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-1::before {\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tright: 25px;\r\n\t/* left: 0;//2.35em; */\r\n\tleft:unset;\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-left: 0;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-right: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n\r\n.branch-selector__node.nesting-level-2:not(.parent-last-child)::after {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tleft: 25px;\r\n\t/* left: 0;//2.35em; */\r\n\ttop: -25%;\r\n\theight: 100%;\r\n\t/* border-bottom: 1px dotted #bbb; */\r\n\tborder-left: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-2:not(.parent-last-child)::after {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 12px;\r\n\tright: 25px;\r\n\t/* left: 0;//2.35em; */\r\n\tleft:unset;\r\n\ttop: -25%;\r\n\theight: 100%;\r\n\t/* border-bottom: 1px dotted #bbb; */\r\n\tborder-right: 1px dotted #bbb;\r\n\tpointer-events: none;\r\n}\r\n\r\n\r\n.branch-selector__node.nesting-level-0+.branch-selector__node.nesting-level-1::before {\r\n\theight: 60%;\r\n\ttop: -15%;\r\n}\r\n\r\n.branch-selector__node qp-icon i.ac {\r\n\tfont-size: 16px;\r\n}\r\n\r\n.branch-selector__node .group-icon {\r\n\tposition: absolute;\r\n\r\n\twidth: 10px;\r\n\tleft: 6px;\r\n\ttop: 3px;\r\n\t/* left: 0;//2.35em; */\r\n\t/* background-color: white; */\r\n\tbackground-color: inherit;\r\n\r\n\r\n}\r\n.rtl .branch-selector__node .group-icon {\r\n\tleft:unset;\r\n\tright:6px;\r\n}\r\n\r\n.branch-selector__node .company-icon {\r\n\tposition: absolute;\r\n\tbackground-color: inherit;\r\n\twidth: 14px;\r\n\theight: 16px;\r\n\tleft: 19px;\r\n\ttop: 4px;\t\r\n}\r\n\r\n.rtl .branch-selector__node .company-icon {\r\n\tleft:unset;\r\n\tright:19px;\r\n}\r\n\r\n\r\n.branch-selector__node.nesting-level-0 .company-icon {\r\n\tleft: 4px;\r\n\ttop: 4px;\r\n}\r\n\r\n.rtl .branch-selector__node.nesting-level-0 .company-icon{\r\n\tleft:unset;\r\n\tright:4px;\r\n}\r\n\r\n.branch-selector__node.can-select {\r\n\tcursor: pointer;\r\n}\r\n\r\n.branch-selector__node-organization {\r\n\tmargin: 2px 0;\r\n}\r\n\r\n.branch-selector__node-branch {\r\n\r\n\tpadding-left: 30px;\r\n\tposition: relative;\r\n}\r\n\r\n.rtl .branch-selector__node-branch {\r\n\r\n\tpadding-left: unset;\r\n\tpadding-right: 30px;\r\n\tposition: relative;\r\n}\r\n\r\n\r\n.branch-selector__node-branch::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 15px;\r\n\tleft: 10px;\r\n\t/* left: 0;//2.35em; */\r\n\ttop: -50%;\r\n\theight: 100%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n}\r\n\r\n.branch-selector__node-organization+.branch-selector__node-branch::before {\r\n\theight: 60%;\r\n\ttop: -15%;\r\n}\r\n\r\nqp-tooltip .tooltip-level {\r\n\tmargin: 5px 0;\r\n\tpadding: 0 2px;\r\n}\r\n\r\nqp-tooltip .branch-level-1 {\r\n\tposition: relative;\r\n\tpadding-left: 15px;\r\n}\r\n\r\nqp-tooltip .branch-level-2 {\r\n\tposition: relative;\r\n\tpadding-left: 30px;\r\n}\r\n\r\n\r\nqp-tooltip .branch-level-1::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 8px;\r\n\tleft: 4px;\r\n\t/* left: 0;//2.35em; */\r\n\theight: 60%;\r\n\ttop: -15%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n}\r\n\r\nqp-tooltip .branch-level-2::before {\r\n\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tcontent: '';\r\n\twidth: 8px;\r\n\tleft: 19px;\r\n\t/* left: 0;//2.35em; */\r\n\theight: 60%;\r\n\ttop: -15%;\r\n\tborder-bottom: 1px dotted #bbb;\r\n\tborder-left: 1px dotted #bbb;\r\n}\r\n"}));define("controls/global/calendar/qp-calendar",["require","exports","tslib","aurelia-framework","aurelia-logging","./services/calendar-service"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpCalendarCustomElement=void 0;var a=i.getLogger("qp-calendar");n.PLATFORM.global.px=n.PLATFORM.global.px||{setTitle:function(){return}};var s=4;var l=["January","February","March","April","May","June","July","August","September","October","November","December"];var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var u=function(){function e(e,t,r,i){this.elem=e;this.animator=t;this.calendarService=r;this.tq=i;this.required=false;this.monthNames=l;this.shortMonthNames=d;this.shortDayNames=c;this.locale="en-US";var o=n.PLATFORM.global.top._dateFormatInfo;if(o){this.monthNames=o.monthNames.split(",");this.shortMonthNames=o.abbrMonthNames.split(",");this.shortDayNames=o.abbrDayNames.split(",")}var a=new Date;this.todayDate=new Date(a.getFullYear(),a.getMonth(),a.getDate());this.todayString=this.todayDateToString()}e.prototype.syncMonthYear=function(){if(this.value instanceof Date){this.month=this.value.getMonth();this.year=this.value.getFullYear();this.day=this.value.getDate()}else{this.month=this.todayDate.getMonth();this.year=this.todayDate.getFullYear();this.day=this.todayDate.getDate()}this.weeksToDisplay=this.selectedCalendarSheet=this.calendarService.getMonthSheet(this.year,this.month);this.setHighlight(this.year,this.month,this.day)};e.prototype.valueChanged=function(){this.syncMonthYear()};e.prototype.attached=function(){this.syncMonthYear();this.monthPaneEle&&this.monthPaneEle.focus()};e.prototype.configChanged=function(e,t){if(this.config){if(this.config.todayDate)this.todayDate=this.config.todayDate;if(this.config.todayString)this.todayString=this.config.todayString}this.syncMonthYear()};e.prototype.keyDown=function(e){var t=e.code||e.key;switch(t){case"Down":case"ArrowDown":this.moveHighlight(0,0,o.DAYS_IN_WEEK);break;case"Up":case"ArrowUp":this.moveHighlight(0,0,-o.DAYS_IN_WEEK);break;case"Right":case"ArrowRight":this.moveHighlight(0,0,1);break;case"Left":case"ArrowLeft":this.moveHighlight(0,0,-1);break;case"PageUp":this.moveHighlight(0,-1,0);break;case"PageDown":this.moveHighlight(0,1,0);break;case"Home":this.moveHighlight(-1,0,0);break;case"End":this.moveHighlight(1,0,0);break;case"Space":case"Spacebar":case" ":this.setHighlight(this.todayDate.getFullYear(),this.todayDate.getMonth(),this.todayDate.getDate());break;case"Enter":break;case"Esc":case"Escape":break;default:return true}e.stopPropagation()};e.prototype.wheel=function(e){if(e.deltaY>0){this.moveHighlight(0,1,0)}else{this.moveHighlight(0,-1,0)}};e.prototype.setHighlight=function(e,t,r){var n=e===this.year&&t===this.month;this.year=e;this.month=t;this.day=r;if(!n){this.selectedCalendarSheet=this.calendarService.getMonthSheet(e,t);this.handleDestinationChanged()}this.weeksToDisplay.forEach((function(n){n.days.forEach((function(n){if(n.day===r&&n.month===t&&n.year===e){n.highlighted=true}else if(n.highlighted){n.highlighted=false}}))}));this.selectedCalendarSheet.forEach((function(n){n.days.forEach((function(n){if(n.day===r&&n.month===t&&n.year===e){n.highlighted=true}else if(n.highlighted){n.highlighted=false}}))}))};e.prototype.hadnleAnimation=function(){var e=this;function t(e){return e<.5?2*e*e:-1+(4-2*e)*e}function r(e){return e*(2-e)}var n=performance.now();var i=n-this.animation.startTime;var o=!this.animation.pendingAnimation;if(i<this.animation.duration){var a=i/this.animation.duration;if(o){a=r(a)}var s=(this.animation.destination-this.animation.startPosition)*a;var l=this.animation.startPosition+s;this.animation.currentOffset=l;if(this.animation.destination<0?this.animation.destination<l:this.animation.destination>l){this.calendarSheet.style.transform="translateY("+l+"px)";requestAnimationFrame((function(){return e.hadnleAnimation()}))}}else{this.calendarSheet.style.transform="";this.updateAnimation()}};e.prototype.updateAnimation=function(){if(this.animation.destination!==0){this.weeksToDisplay.splice(0,this.weeksToDisplay.length-6)}else{this.weeksToDisplay.splice(6)}this.tq.flushMicroTaskQueue();if(this.animation.pendingAnimation){this.calculateNextImmediateAnimation()}else{delete this.animation;this.animating=false}};e.prototype.calculateNextImmediateAnimation=function(){var e,t;var n=this;var i=this.selectedCalendarSheet.slice();var o=this.animation&&this.animation.pendingAnimation?300:450;var a=this.weeksToDisplay[1].days[6];var s=i[1].days[6];var l=this.calendarService.getCalendarSheetId(s.year,s.month);var d=this.calendarService.getCalendarSheetId(a.year,a.month);var c=l>d;var u=Math.abs(l-d)>1;var p=1;if(c){if(!u){while(i[0].days[1].day!==this.weeksToDisplay[this.weeksToDisplay.length-p].days[1].day){p++}i.splice(0,p)}(e=this.weeksToDisplay).splice.apply(e,r.__spreadArrays([this.weeksToDisplay.length,0],i))}else{if(!u){while(i[i.length-p].days[1].day!==this.weeksToDisplay[0].days[1].day){p++}i.splice(i.length-p)}(t=this.weeksToDisplay).splice.apply(t,r.__spreadArrays([0,0],i))}this.tq.flushMicroTaskQueue();var h=this.calendarSheet.getBoundingClientRect().height;var g=this.calendarSheet.scrollHeight;var f=g-h;this.animation={startTime:performance.now(),duration:o,startPosition:c?0:-f,destination:c?-f:0,pendingAnimation:false,currentOffset:0};requestAnimationFrame((function(){return n.hadnleAnimation()}))};e.prototype.handleDestinationChanged=function(){if(!this.animating){this.animating=true;this.calculateNextImmediateAnimation()}else{if(this.animation&&!this.animation.pendingAnimation){this.animation.pendingAnimation=true;var e=performance.now();this.animation.startTime=e;this.animation.startPosition=this.animation.currentOffset;var t=Math.abs((this.animation.destination-this.animation.startPosition)/2);this.animation.duration=t}}};e.prototype.moveHighlight=function(e,t,r){var n=new Date(this.year+e,this.month+t,this.day+r);this.setHighlight(n.getFullYear(),n.getMonth(),n.getDate())};e.prototype.todayDateToString=function(){return Intl.DateTimeFormat(this.locale).format(this.todayDate)};r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"value",void 0);e=r.__decorate([n.autoinject,n.customElement("qp-calendar"),r.__metadata("design:paramtypes",[Element,n.Animator,o.CalendarService,n.TaskQueue])],e);return e}();t.QpCalendarCustomElement=u}));define("text!controls/global/calendar/qp-calendar.html",[],(function(){return'<template><require from="./qp-calendar"></require><style>.calendar-table td,.calendar-table th{width:40px;box-sizing:border-box;text-align:right;font-weight:400}.calendar-table th{text-align:center}.calendar-table td:first-child,.calendar-table th:first-child{width:30px;text-align:right;padding:0 8px}</style><table class="calendar" cellpadding="0" cellspacing="0" style="z-index:11000"><tbody><tr><td class="calendarMT"><table cellpadding="0" cellspacing="0" border="0" style="height:100%;width:100%"><tbody><tr><td class="calendarNP" ref="prevMonthEle"><div class="sprite-icon control-icon" icon="PrevMonth" click.delegate="moveHighlight(0,-1,0)"><div class="control-icon-img control-PrevMonth"></div></div></td><td style="text-align:Center"><select value.bind="month"><option repeat.for="m of monthNames" model.bind="$index">${m}</option></select> <select value.bind="year"><option repeat.for="i of 11" model.bind="year+i-5">${year+i-5}</option></select></td><td class="calendarNP" ref="nextMonthEle"><div class="sprite-icon control-icon" icon="NextMonth" click.delegate="moveHighlight(0,1,0)"><div class="control-icon-img control-NextMonth"></div></div></td></tr></tbody></table></td></tr><tr><td><table cellspacing="0" align="Center" border="0" class="calendar-table" style="table-layout:fixed;border-collapse:collapse;overflow:hidden" keydown.trigger="keyDown($event)" wheel.trigger="wheel($event)" ref="monthPaneEle" tabindex="0"><colgroup><col><col repeat.for="i of 7" class="${(i+firstDayOfWeek+6)%7<=1?\'calendarWE\':\'\' & oneTime} "></colgroup><tbody style="display:block;max-height:186px" ref="calendarSheet"><tr repeat.for="week of weeksToDisplay"><td class="calendarWN calendarD">${week.weekNumber & oneTime}</td><td repeat.for="wday of week.days" class="calendarD ${wday.month !== month ? \'calendarOMD\' : \'\'} ${wday.weekend ? \'calendarWE\':\'\' & oneTime} ${wday.today ? \'calendarTD\' : \'\' & oneTime} ${wday.highlighted ? \'calendarSD\':\'\'} ">${wday.day & oneTime}</td></tr></tbody><thead><tr style="display:block;position:relative"><th class="calendarDH">#</th><th class="calendarDH" repeat.for="i of 7"> ${shortDayNames[(i+firstDayOfWeek)%7] & oneTime}</th></tr></thead></table></td></tr><tr><td class="calendarF" style="cursor:pointer" click.capture="selectTheDate(todayDate)"> ${todayString} </td></tr></tbody></table></template>'}));define("controls/global/calendar/services/calendar-service",["require","exports","aurelia-pal"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CalendarService=t.DAYS_IN_WEEK=void 0;t.DAYS_IN_WEEK=7;var n=864e5;var i=12;var o=6;var a=5;var s=function(){function e(){this.firstDayOfWeek=0;var e=r.PLATFORM.global.top.__PXCalendar;if(e){this.firstDayOfWeek=e.firstDayOfWeek}this.monthCache=new Map}e.prototype.getMonthSheet=function(e,t){var r=this.getWeeksFor(e,t);return r.slice()};e.prototype.getCalendarSheetId=function(e,t){return e*i+t};e.prototype.getWeekNumber=function(e){var r=new Date(e.getFullYear(),0,0);var i=e.getDay()+this.firstDayOfWeek;var o=Math.floor(((e.getTime()-r.getTime())/n-(i+t.DAYS_IN_WEEK)%t.DAYS_IN_WEEK+10)/t.DAYS_IN_WEEK);if(o===53&&e.getDate()>=28){return 1}return o};e.prototype.getWeeksFor=function(e,r){var n=new Date(e,r,1);var a=n.getDay();var s=n.getDay()===this.firstDayOfWeek;var l=s?t.DAYS_IN_WEEK:(t.DAYS_IN_WEEK+a-this.firstDayOfWeek)%t.DAYS_IN_WEEK;var d=new Date(e,r,1-l);var c=new Date(e,r+1,0).getDate();var u=d.getFullYear();var p=d.getMonth();var h=d.getDate();var g=this.getWeekNumber(d);var f=[];var v={weekNumber:g,days:[]};var b=0;for(;b<l;b++){v.days.push({year:u,month:p,day:h++,weekend:false,today:false})}p++;h=1;if(p===i){p=0;u++}for(;b<t.DAYS_IN_WEEK;b++){v.days.push({year:u,month:p,day:h++,weekend:false,today:false})}f.push(v);var m=Math.floor((c-(t.DAYS_IN_WEEK-l)%t.DAYS_IN_WEEK)/t.DAYS_IN_WEEK);for(var y=m;y>0;y--){g=g<52?++g:g=this.getWeekNumber(new Date(u,p,h));v={weekNumber:g,days:[]};for(var x=0;x<t.DAYS_IN_WEEK;x++){v.days.push({year:u,month:p,day:h++,weekend:false,today:false})}f.push(v)}g=g<52?++g:g=this.getWeekNumber(new Date(u,p,h));v={weekNumber:g,days:[]};for(b=0;h<=c;b++){v.days.push({year:u,month:p,day:h++,weekend:false,today:false})}p++;h=1;if(p===i){p=0;u++}for(;b<t.DAYS_IN_WEEK;b++){v.days.push({year:u,month:p,day:h++,weekend:false,today:false})}f.push(v);if(f.length<o){g=g<52?++g:g=this.getWeekNumber(new Date(u,p,h));v={weekNumber:g,days:[]};for(var x=0;x<t.DAYS_IN_WEEK;x++){v.days.push({year:u,month:p,day:h++,weekend:false,today:false})}f.push(v)}return f};return e}();t.CalendarService=s}));define("controls/global/color-picker/qp-color-picker",["require","exports","tslib","aurelia-framework"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpColorPickerCustomElement=void 0;var i=true;var o=document.createElement("input");o.setAttribute("type","color");o.value="a";if(o.value==="a"){i=false}var a=function(){function e(){this.supportsColor=i}e.prototype.validateValue=function(e){var t=/^#[a-f\d]{6}$/i;var r=t.test(e.target.value);if(!r){e.target.value="#000000"}};r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([n.bindable,r.__metadata("design:type",String)],e.prototype,"value",void 0);e=r.__decorate([n.customElement("qp-color-picker"),n.autoinject],e);return e}();t.QpColorPickerCustomElement=a}));define("text!controls/global/color-picker/qp-color-picker.html",[],(function(){return'<template style="display:inline-block"><div style="display:flex;padding:0;border:0" class.bind="config.class"><input if.bind="supportsColor" disabled.bind="config.readOnly" class="editor" style="flex:1 1 auto" type="color" tabindex="${config.tabIndex}" value.bind="value & updateTrigger:\'blur\'"> <span else css="background-color:${value};flex:1 1 auto;min-width:60px;"></span> <input class="editor size-xs" disabled.bind="config.readOnly" style="flex:0 1 auto" type="text" value.bind="value & updateTrigger:\'blur\'" id="${config.id}" tabindex="${config.tabIndex}" name="${config.name}" blur.capture="validateValue($event)"></div></template>'}));define("controls/global/field-editor/qp-field-editor",["require","exports","tslib","aurelia-framework","plugins/selector-service/selector-service","aurelia-logging"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpFieldEditorCustomElement=void 0;var a=o.getLogger("qp-field-editor");var s=function(){function e(e,t){this.element=e;this.selectorService=t;this.showSelector=false;this.suggesterOpen=false}e.prototype.configChanged=function(e){if(e){var t=e.suggester,r=t.viewName,n=t.graph;var i=e.suggester.fields.map((function(e){return{field:e.id,caption:e.label,width:100}}));this.gridConfig={graph:n,view:r,columns:i,valueField:e.suggester.valueField,descriptionName:e.suggester.descriptionName,pageSize:20,id:e.id+"_grid"}}};e.prototype.click=function(){this.editor.focus();this.suggesterOpen=!this.suggesterOpen};e.prototype.handleKeyDown=function(e){if(e.key==="F3"){e.preventDefault();e.stopImmediatePropagation();this.click()}else{return true}};e.prototype.onBlur=function(){var e;if(this.editor.value.trim()===""){this.value=null}else{if(!((e=this.value)===null||e===void 0?void 0:e.id)||this.editor.value!=this.value.id){this.value={id:this.editor.value,text:this.editor.value}}}return true};e.prototype.setEditorValue=function(e,t,r){this.value={id:e,text:t?e+" - "+t:""+e}};r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"value",void 0);e=r.__decorate([n.autoinject,n.customElement("qp-selector"),r.__metadata("design:paramtypes",[Element,i.SelectorService])],e);return e}();t.QpFieldEditorCustomElement=s}));define("text!controls/global/field-editor/qp-field-editor.css",[],(function(){return'.qp-field-editor,\r\n.qp-field-editor * {\r\n\t-webkit-box-sizing: border-box;\r\n\t        box-sizing: border-box;\r\n}\r\n\r\nqp-selector {\r\n\tdisplay: block;\r\n}\r\n.qp-field-editor{\r\n\tbackground-color: #fff;\t\r\n}\r\n\r\n.qp-field-editor input.editor-input {\r\n\tcolor: transparent;\r\n\tmargin: 0;\r\n\tborder: 0;\r\n\twidth: 20px;\r\n\t-webkit-box-flex:1;\r\n\t    -ms-flex:1 1 auto;\r\n\t        flex:1 1 auto;\r\n\tpadding:0 4px 0 6px;\r\n\tbackground-color: transparent;\r\n\theight: 23px;\r\n\tline-height: 23px;\r\n}\r\n\r\n/* .qp-field-editor input.editor-input[enabled="false"], .qp-field-editor input.editor-input[disabled] {\r\n\tbackground-color: transparent;\r\n\tbox-shadow: none;\r\n\tborder-color: transparent;\r\n\tborder-bottom-color: #E0E4E8;\r\n\tborder-bottom-style: dotted;\r\n\tborder-width: 1px;\r\n}*/\r\n.qp-field-editor input.editor-input[readonly] {\r\n\tbackground-color: #F5F7F8 !important;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: transparent;\r\n\tborder-right-color: transparent;\r\n\t\r\n\tborder-width: 1px;\r\n} \r\n\r\n.qp-field-editor input.editor-input[readonly]:focus {\r\n\tborder-width: 1px;\t\r\n\t-webkit-box-shadow: 0px 0px 0px 0px transparent;\t\r\n\t        box-shadow: 0px 0px 0px 0px transparent;\r\n\tborder-bottom-color: #D2D4D7;\r\n\r\n\tbackground-color: #F5F7F8;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: transparent;\r\n\tborder-right-color: transparent;\r\n}\r\n\r\n\r\n.qp-field-editor__display-text {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tright: 26px;\r\n\theight: 100%;\r\n\tpointer-events: none;\r\n\r\n\tmargin: 0;\r\n\tborder: 0;\r\n\tpadding: 0 4px 0 6px;\r\n\tline-height: 23px;\r\n\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\ttext-overflow: ellipsis;\r\n}\r\n\r\n.qp-field-editor__button {\r\n\tmargin: 2px 4px 2px 0;\r\n\tbackground: #fff;\r\n\tborder: 0;\r\n\twidth: 20px;\r\n\tcolor: #000;\r\n\tcursor: pointer;\r\n\tpadding: 1px 6px;\r\n}\r\n\r\n\r\n.edit-mode .qp-field-editor__display-text {\r\n\tvisibility: hidden;\r\n}\r\n\r\n.edit-mode input.editor-input {\r\n\tcolor: initial;\r\n}\r\n\r\n.dialog-container{\r\n\tbackground:white;\r\n\tz-index: 1000;\r\n\t/* position: absolute; */\r\n\tmax-height: 500px;\r\n\t\r\n}\r\n.dialog-container.hide-selector{\r\n\tdisplay: none;\r\n}\r\n'}));define("text!controls/global/field-editor/qp-field-editor.html",[],(function(){return'<template class="qp-field-editor"><require from="./qp-field-editor.css"></require><require from="../suggester/elements/qp-suggester"></require><div class="editor qp-field-editor ${editMode?\'focus edit-mode\':\'\'}" style="display:flex;padding:0;position:relative" ref="editorDiv" id="${config.id}" tabindex="-1"><input class="editor-input" id="${config.id}_text" name="${config.name}" tabindex="${config.tabIndex}" value.to-view="value.id" ref="editor" blur.trigger="onBlur()" autocomplete="off" autocorrect="off" focus.from-view="editMode" keydown.delegate="handleKeyDown($event)" enabled.bind="config.enabled ? null : false & attr" readonly="${config.readOnly || !config.enabled ? true : null}"> <button if.bind="!config.readOnly && !config.disabled" type="button" mousedown.trigger="click()" class="qp-field-editor__button" tabindex="-1"><div class="sprite-icon control-icon" icon="SelectorN" type="sel"><div class="control-icon-img control-SelectorN"></div></div></button><div class="qp-field-editor__display-text" if.bind="value && value.id && value.text">${value.text}</div><div class="qp-field-editor__display-text" if.bind="value && value.id && !value.text">${value.id}</div></div><qp-suggester if.bind="config.suggester && editor" config.bind="config.suggester" editor.two-way="editor" rect-element.bind="editorDiv" force-open.two-way="suggesterOpen" set-editor-value.call="setEditorValue(value,display,useUpdateValue)"></qp-suggester></template>'}));define("controls/global/grid/api-client",["require","exports","tslib","aurelia-framework","apps/enhance/services/api-client","aurelia-fetch-client"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GridApiClient=void 0;var a=function(e){r.__extends(t,e);function t(t){var r=e.call(this,t)||this;r.client=t;return r}t.prototype.getGridData=function(e,t){return this.client.fetch("ui/grid",{method:"POST",body:o.json(e),signal:t}).then((function(e){return e.json()}))};t=r.__decorate([n.autoinject,r.__metadata("design:paramtypes",[o.HttpClient])],t);return t}(i.ApiClient);t.GridApiClient=a}));define("controls/global/grid/qp-grid",["require","exports","tslib","aurelia-framework","./api-client","apps/enhance/services/control-helper","apps/enhance/services/mark-highlights"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpGridEventArgs=t.GridColumnType=t.GridColumnGeneration=t.TextAlign=t.SortDirection=t.QpGridCustomElement=void 0;var s=function(){function e(e,t,r,n){this.element=e;this.apiClient=t;this.tq=r;this.bindingEngine=n;this.subscriptions=new Array;this.loadingStatus="in-sync";this.needRefreshColumns=true;this.visibleCols=new Array;this.activeRowIndex=0;this.activeCellIndex=0}t=e;e.prototype.configChanged=function(e,r){if(r===undefined){o.applyDefaultValues(e,t.defaultConfig);this.fillVisibleColumns();this.createSubscriptions();this.getRows()}};e.prototype.attached=function(){var e=this;if(this.rows==null)this.getRows();if(o.browser.isAnyIE){this.tq.queueTask((function(){e.createSubscriptions();o.applyDefaultValues(e.config,t.defaultConfig)}))}};e.prototype.dettached=function(){this.clearSubscriptions()};e.prototype.createSubscriptions=function(){var e=this;this.clearSubscriptions();var t=function(){return e.fillVisibleColumns()};this.config.columns.forEach((function(r){var n=e.bindingEngine.propertyObserver(r,"visible").subscribe(t);e.subscriptions.push(n)}));var r=this.bindingEngine.collectionObserver(this.config.columns).subscribe(t);this.subscriptions.push(r)};e.prototype.clearSubscriptions=function(){this.subscriptions.forEach((function(e){return e.dispose()}));this.subscriptions=[]};e.prototype.getRows=function(e,t){if(e===void 0){e=false}if(t===void 0){t=""}return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;var a=this;return r.__generator(this,(function(r){if(!this.rowsPromise&&this.config){n=this.config.columns.map((function(e){return{field:e.field,sortDirection:e.sortDirection,generated:e.generated}}));i=e?this.rows.length:0;o={graph:this.config.graph,view:this.config.view,columns:n,refreshColumns:this.needRefreshColumns,generateColumns:this.config.generateColumns,startRow:i,pageSize:this.config.pageSize,fastFilter:t,parameters:this.config.parameters};this.loadingStatus="loading";this.rowsPromise=this.apiClient.getGridData(o).then((function(t){a.totalRowCount=t.totalRowCount;a.isLastPage=t.isLastPage;a.rows=e?a.rows.concat(t.rows):t.rows;if(t.columns){var r=a.config.generateColumns;if(r===c.Recreate||r===c.Selector){a.config.columns.splice(0,a.config.columns.length)}t.columns.forEach((function(e){var n=a.config.columns.find((function(t){return t.field===e.field}));if(n){a.copyColumnInitialProps(n,e);a.copyColumnProps(n,e)}else if(r!==c.None){var i=t.columns.indexOf(e);var o=a.config.columns.length;a.config.columns.splice(i>o?o:i,0,e)}}));a.needRefreshColumns=false}else if(t.colsProps){t.colsProps.forEach((function(e){var t=a.config.columns.find((function(t){return t.field===e.field}));if(t)a.copyColumnProps(t,e)}))}a.loadingStatus="in-sync";delete a.rowsPromise}))}return[2,this.rowsPromise]}))}))};e.prototype.applyFastFilter=function(e){this.getRows(false,this.fastFilter=e)};e.prototype.copyColumnInitialProps=function(e,t){if(t.caption!==undefined)e.caption=t.caption;if(t.dataType!==undefined)e.dataType=t.dataType;if(t.width!==undefined)e.width=t.width;if(t.textAlign!==undefined)e.textAlign=t.textAlign;if(t.timeMode!==undefined)e.timeMode=t.timeMode;if(t.viewName!==undefined)e.viewName=t.viewName;if(t.maxLength!==undefined)e.maxLength=t.maxLength;if(t.allowNull!==undefined)e.allowNull=t.allowNull;if(t.allowFastFilter!==undefined)e.allowFastFilter=t.allowFastFilter};e.prototype.copyColumnProps=function(e,t){if(t.visible!==undefined)e.visible=t.visible;if(t.required!==undefined)e.required=t.required;if(t.allowUpdate!==undefined)e.allowUpdate=t.allowUpdate;if(t.format!==undefined)e.format=t.format;if(t.decimals!==undefined)e.decimals=t.decimals};e.prototype.getMoreRows=function(e,t,r){if(t&&!this.isLastPage)this.getRows(true)};e.prototype.rowsChanged=function(){var e=this;var t=this.elemContentWrap;this.tq.queueMicroTask((function(){return e.hasVScroll=t.scrollHeight>t.offsetHeight}));if(this.rows&&this.activeRowIndex>=this.rows.length)this.activeRowIndex=this.rows.length-1};e.prototype.getActiveRow=function(){return this.rows[this.activeRowIndex]};e.prototype.getActiveCell=function(){var e;var t=this.visibleCols[this.activeCellIndex];return(e=this.getActiveRow())===null||e===void 0?void 0:e.cells[t.field]};e.prototype.getColHeaderIcon=function(e){if(e!==l.None){return e===l.Ascending?"control-SortAsc":"control-SortDesc"}return""};e.prototype.getColAlign=function(e){switch(e){case d.Center:return"center";case d.Right:return"right";case d.Justify:return"justify"}return null};e.prototype.fillVisibleColumns=function(){var e;if(this.config.columns===undefined)return;var t=this.config.columns.filter((function(e){return e.visible!==false}));(e=this.visibleCols).splice.apply(e,r.__spreadArrays([0,this.visibleCols.length],t))};e.prototype.markFilterText=function(e){return a.markHighlights(this.fastFilter,e)};e.prototype.getColumnIndex=function(e){return this.config.columns.findIndex((function(t){return t.field===e}))};e.prototype.getColumnVisibleIndex=function(e){return this.visibleCols.findIndex((function(t){return t.field===e}))};e.prototype.getColumnCellIndex=function(e){var t=typeof e==="string";var r=t?this.getColumnIndex(e):e;return this.config.showRowSelectors?r+1:r};e.prototype.getRowElem=function(e){return this.elemRows.querySelector('tr[data-index="'+e+'"]')};e.prototype.getColHeaderElem=function(e){var t=this.elemHeaderTable.tHead.rows[0].cells;var r=e;return t[this.getColumnCellIndex(r!=null?r.field:e)]};e.prototype.scrollIntoView=function(e,t){if(t===void 0){t=o.ScrollMode.Both}if(e)o.scrollToView(this.elemContentWrap,e,t)};e.prototype.fireDefaultAction=function(){if(this.onDefaultAction)this.onDefaultAction({args:new p(this)})};e.prototype.processRowsScroll=function(e){this.elemHeaderWrap.scrollLeft=this.elemContentWrap.scrollLeft};e.prototype.processSelectStart=function(e){e.preventDefault()};e.prototype.processHeadClick=function(e,t){if(e.button!==0)return;this.config.columns.forEach((function(e){if(e!==t)e.sortDirection=undefined}));switch(t.sortDirection){case l.Ascending:t.sortDirection=l.Descending;break;case l.Descending:t.sortDirection=undefined;break;default:t.sortDirection=l.Ascending;break}this.getRows()};e.prototype.processCellClick=function(e,t,r){var n=e.target;this.scrollIntoView(n);this.activeRowIndex=this.rows.indexOf(r);this.activeCellIndex=t};e.prototype.processCellDblClick=function(e,t,r){if(this.onDoubleClick)this.onDoubleClick({sender:this});this.fireDefaultAction()};e.prototype.processRowSelectorClick=function(e,t){this.scrollIntoView(e.target);this.activeRowIndex=this.rows.indexOf(t)};e.prototype.processKeyDown=function(e){var t=this;var r=this.activeRowIndex;var n=this.activeCellIndex;var i=false;var a=this.visibleCols;if(this.onKeyDown)this.onKeyDown({sender:this,event:e});switch(e.key){case"Down":case"ArrowDown":if(r<this.rows.length-1)r++;break;case"Up":case"ArrowUp":if(r>0)r--;break;case"Right":case"ArrowRight":if(n<a.length-1)n++;break;case"Left":case"ArrowLeft":if(n>0)n--;break;case"Home":n=0;break;case"End":n=a.length-1;break;case"Enter":if(!e.ctrlKey&&!e.altKey)this.fireDefaultAction();break}var s=this.getRowElem(this.activeRowIndex);var l=function(e){t.scrollIntoView(e,o.ScrollMode.Vertical);if(o.browser.isAnyIE)s.cells[t.getColumnCellIndex(n)].focus()};if(this.activeRowIndex!==r){var d=this.getRowElem(r);var c=r<this.activeRowIndex;this.activeRowIndex=r;if(!d&&s&&c){this.elemContentWrap.scrollTop-=s.offsetHeight;this.tq.queueMicroTask((function(){d=t.getRowElem(r);l(d)}))}if(d)l(d);i=true}if(this.activeCellIndex!==n&&s){var u=s.cells[n===0?0:this.getColumnCellIndex(n)];this.scrollIntoView(u);this.activeCellIndex=n;i=true}return!i};e.prototype.setResizeHandlePosition=function(e){var t=this.getColHeaderElem(e);if(t){var r=t.getBoundingClientRect();var n=this.elemHeaderWrap.getBoundingClientRect();var i=this.elemResizeHandle.offsetWidth;var o=this.elemHeaderWrap.scrollLeft;this.elemResizeHandle.style.left=r.right+o-n.left-i+"px";this.elemResizeHandle.setAttribute("data-index",this.getColumnVisibleIndex(e.field).toString())}};e.prototype.setResizerPosition=function(e){var t=this.resizeInfo;if(t!==undefined){var r=this.elemHeaderWrap.getBoundingClientRect();var n=e.pageX-r.left;if(t.left<0)t.left=n;var i=t.width+(n-t.left);var o=20;if(i>=o)this.elemResizeIndicator.style.left=n+"px";return i>o?i:o}};e.prototype.processHeadMouseOver=function(e,t){this.setResizeHandlePosition(t)};e.prototype.processResizerMouseDown=function(e){var t=this.elemResizeHandle.getAttribute("data-index");if(t!=null){var r=this.visibleCols[parseInt(t)];this.resizeInfo={left:-1,column:r,width:r.width||0};this.setResizerPosition(e)}};e.prototype.processResizerMouseMove=function(e){if(this.resizeInfo!==undefined)this.setResizerPosition(e)};e.prototype.processResizerMouseUp=function(e){var t=this;var r=this.resizeInfo;if(r!==undefined){var n=this.setResizerPosition(e);if(n)r.column.width=n;this.tq.queueMicroTask((function(){return t.setResizeHandlePosition(r.column)}));this.resizeInfo=undefined}};e.prototype.processResizerMouseLeave=function(e){this.resizeInfo=undefined};e.prototype.processDragStart=function(e,t){this.dragInfo={column:t,targetIndex:undefined};return true};e.prototype.processDragOver=function(e,t){if(this.dragInfo&&this.dragInfo.column!==t){var r=this.getColHeaderElem(t);var n=r.getBoundingClientRect();var i=2;var o=e.clientX<n.left+n.width/i;var a=(o?n.left:n.right)-this.elemArrowDown.offsetWidth/i;this.elemArrowUp.style.left=this.elemArrowDown.style.left=a+"px";var s=this.getColumnIndex(t.field)+(o?0:1);var l=this.getColumnIndex(this.dragInfo.column.field);if(s>l)s--;this.dragInfo.targetIndex=s===l?undefined:s}else if(this.dragInfo){this.dragInfo.targetIndex=undefined}};e.prototype.processDragLeave=function(e){if(this.dragInfo&&!this.elemHeaderWrap.contains(e.relatedTarget)){this.dragInfo.targetIndex=undefined}};e.prototype.processDrop=function(e,t){var r;if(this.dragInfo){var n=(r=this.dragInfo)===null||r===void 0?void 0:r.targetIndex;var i=this.getColumnIndex(this.dragInfo.column.field);var o=this.config.columns;if(n!==undefined)o.splice(n,0,o.splice(i,1)[0]);this.dragInfo=undefined}};Object.defineProperty(e.prototype,"showDragArrows",{get:function(){return!!this.dragInfo&&this.dragInfo.targetIndex!==undefined},enumerable:false,configurable:true});var t;e.defaultConfig={pageSize:100,showRowSelectors:true};r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Array)],e.prototype,"rows",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onDoubleClick",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onKeyDown",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onDefaultAction",void 0);r.__decorate([n.computedFrom("dragInfo","dragInfo.targetIndex"),r.__metadata("design:type",Boolean),r.__metadata("design:paramtypes",[])],e.prototype,"showDragArrows",null);e=t=r.__decorate([n.customElement("qp-grid"),n.autoinject,r.__metadata("design:paramtypes",[Element,i.GridApiClient,n.TaskQueue,n.BindingEngine])],e);return e}();t.QpGridCustomElement=s;var l;(function(e){e[e["None"]=0]="None";e[e["Ascending"]=1]="Ascending";e[e["Descending"]=2]="Descending"})(l=t.SortDirection||(t.SortDirection={}));var d;(function(e){e[e["NotSet"]=0]="NotSet";e[e["Left"]=1]="Left";e[e["Center"]=2]="Center";e[e["Right"]=3]="Right";e[e["Justify"]=4]="Justify"})(d=t.TextAlign||(t.TextAlign={}));var c;(function(e){e[e["None"]=0]="None";e[e["Append"]=1]="Append";e[e["Recreate"]=2]="Recreate";e[e["AppendDynamic"]=3]="AppendDynamic";e[e["Selector"]=4]="Selector"})(c=t.GridColumnGeneration||(t.GridColumnGeneration={}));var u;(function(e){e[e["NotSet"]=0]="NotSet";e[e["Icon"]=1]="Icon";e[e["HyperLink"]=2]="HyperLink"})(u=t.GridColumnType||(t.GridColumnType={}));var p=function(){function e(e){this.activeRow=undefined;this.activeCell=undefined;this.activeRow=e.getActiveRow();this.activeCell=e.getActiveCell()}e.prototype.getCell=function(e){if(this.activeRow){var t=e.toLowerCase();for(var r in this.activeRow.cells){if(r.toLowerCase()===t)return this.activeRow.cells[r]}}};return e}();t.QpGridEventArgs=p}));define("text!controls/global/grid/qp-grid.css",[],(function(){return"::-webkit-input-placeholder {\r\n  font-style: italic;\r\n}\r\n::-moz-placeholder {\r\n  font-style: italic;\r\n}\r\n:-ms-input-placeholder {\r\n  font-style: italic;\r\n}\r\n\r\nqp-grid, qp-grid * \r\n{\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n}\r\nqp-grid\r\n{\r\n  position: relative;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  border: 1px solid #D2D4D7;\r\n  font-size: 13px;\r\n}\r\nqp-grid i.ac\r\n{\r\n  position: relative;\r\n}\r\n\r\n.grid-filter-bar\r\n{\r\n  border-bottom: 1px solid #E0E4E8;\r\n  padding: 5px;\r\n  background-color: #F5F7F8;\r\n}\r\n.grid-filter-text\r\n{\r\n  width: 200px;\r\n  border: 1px solid #D2D4D7;\r\n  padding: 4px 6px;\r\n}\r\n\r\n.grid-header\r\n{\r\n  position: relative;\r\n  background-color: #F5F7F8;\r\n  border-bottom: 1px solid #E0E4E8;\r\n}\r\n.grid-header.scroll-margin\r\n{\r\n  padding-right: 17px;\r\n}\r\n.grid-header i.arrow-down, .grid-header i.arrow-up\r\n{\r\n  position: absolute;\r\n  z-index: 10000;\r\n}\r\n.grid-header i.arrow-down\r\n{\r\n  top: 0px;\r\n  -webkit-transform: translateY(-100%);\r\n          transform: translateY(-100%);\r\n}\r\n.grid-header i.arrow-up\r\n{\r\n  bottom: 0px;\r\n  -webkit-transform: translateY(100%);\r\n          transform: translateY(100%);\r\n}\r\n\r\n.grid-resize-handle\r\n{\r\n  position: absolute;\r\n  top: 0px; bottom: 0px;\r\n  cursor: col-resize;\r\n  width: 4px;\r\n  z-index: 1000;\r\n}\r\n.grid-resize-area\r\n{\r\n  position: absolute;\r\n  top: 0px;\r\n  height: 100%;\r\n  width: 100%;\r\n  z-index: 20000;\r\n  cursor: col-resize;\r\n}\r\n.grid-resize-indicator\r\n{\r\n  width: 1px;  \r\n  border: 1px black solid;\r\n  position: absolute;\r\n  height: 100%;\r\n}\r\n\r\n.grid-header table, .grid-content table\r\n{\r\n  table-layout: fixed;\r\n  width: 100%;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  border-collapse: separate;\r\n  border-width: 0px;\r\n  border-spacing: 0px;\r\n  outline: 0;\r\n}\r\n\r\n.grid-header th\r\n{\r\n  position: relative;\r\n  font-size: 12px;\r\n  color: rgba(0, 0, 0, 0.54);\r\n  font-weight: bold;\r\n  padding: 6px 4px;\r\n  padding-right: 15px;\r\n  border-left: 1px solid #E0E4E8;\r\n  overflow: hidden;\r\n  white-space: normal;\r\n  text-align: left;\r\n  vertical-align: top;\r\n}\r\n.grid-header th:first-child\r\n{\r\n  border-left-width: 0;\r\n}\r\n.grid-header th:hover\r\n{\r\n  background-color: #E0E4E8;\r\n  color: RGBA(0, 0, 0, 0.87);\r\n  cursor: pointer;\r\n}\r\n\r\n.grid-header th i.ac\r\n{\r\n  position: absolute;\r\n  top: 6px; right: 4px;\r\n}\r\n\r\n.grid-header-wrap\r\n{\r\n  overflow: hidden;\r\n  position: relative;\r\n  border-right: 1px solid #E0E4E8;\r\n}\r\n\r\n.grid-content .row-selector-col\r\n{\r\n  width: 16px;\r\n}\r\n.grid-header .row-selector-col\r\n{\r\n  width: 15px;\r\n}\r\n.grid-header th.row-selector, .grid-content-wrap td.row-selector\r\n{\r\n  padding: 0px;\r\n  color: rgba(0, 0, 0, 0.54);\r\n}\r\n.grid-content-wrap td.row-selector\r\n{\r\n  background-color: #F5F7F8 !important; \r\n  border-right: 1px solid #E0E4E8;\r\n}\r\n\r\n.grid-content\r\n{\r\n  position: relative;\r\n  height: 100%;\r\n}\r\n.grid-content qp-loader-indicator\r\n{\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: white;\r\n  opacity: 0.5;\r\n  z-index: 100;\r\n}\r\n.grid-content qp-loader-indicator > *\r\n{\r\n  position: absolute;\r\n  left: 50%;\r\n  top: 50%;\r\n  -webkit-transform: translate(-50%, -50%);\r\n          transform: translate(-50%, -50%);\r\n}\r\n\r\n.grid-content-wrap\r\n{\r\n  overflow: auto;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n.grid-content-wrap td\r\n{\r\n  line-height:  16px;\r\n  min-height: 17px;\r\n  border-bottom: 1px solid #E0E4E8;\r\n  overflow: hidden;\r\n  padding: 7px 8px 5px;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  cursor: default;\r\n}\r\n\r\n.grid-content-wrap tr.alt-row td\r\n{\r\n  background-color: #F2F6FA;\r\n}\r\n/* \r\n.grid-content-wrap tr:hover td\r\n{\r\n  background-color: #E0E4E8;\r\n  color: RGBA(0, 0, 0, 0.87);\r\n  cursor: default;\r\n} */\r\n\r\n.grid-content-wrap tr.active td\r\n{\r\n  background-color: #E0E4E8;\r\n}\r\n.grid-content-wrap tr.active td.active\r\n{\r\n  background-color: #B5D7EF;\r\n}\r\n\r\n"}));define("text!controls/global/grid/qp-grid.html",[],(function(){return'<template class="grid" id="${config.id}" css="display: ${config.hidden ? \'none\': \'\'};"><require from="./qp-grid.css"></require><div class="grid-filter-bar"><input type="text" class="grid-filter-text" placeholder="Filter..." input.delegate="applyFastFilter($event.target.value) & debounce:500"></div><div class="grid-resize-area" show.bind="resizeInfo != undefined" mousemove.delegate="processResizerMouseMove($event)" mouseup.delegate="processResizerMouseUp($event)" mouseleave.trigger="processResizerMouseLeave($event)"><div class="grid-resize-indicator" ref="elemResizeIndicator"></div></div><div class="grid-header ${hasVScroll ? \'scroll-margin\' : \'\'}" ref="elemHeader"><div class="grid-header-wrap" ref="elemHeaderWrap"><table ref="elemHeaderTable"><colgroup><col if.bind="config.showRowSelectors" class="row-selector-col"><col repeat.for="col of visibleCols" css="width: ${col.width ? (col.width + \'px\'): null};"></colgroup><thead><tr><th if.bind="config.showRowSelectors" class="row-selector">&nbsp;</th><th repeat.for="col of visibleCols" css="text-align:${getColAlign(col.textAlign)}" mouseup.delegate="processHeadClick($event, col)" mouseover.delegate="processHeadMouseOver($event, col)" draggable="true" dragstart.delegate="processDragStart($event, col)" dragover.delegate="processDragOver($event, col)" drop.delegate="processDrop($event, col)" dragleave.delegate="processDragLeave($event)"><span class="grid-header-text">${col.caption}</span><i if.bind="col.sortDirection > 0" class="ac ${getColHeaderIcon(col.sortDirection)}"></i></th></tr></thead></table><div class="grid-resize-handle" ref="elemResizeHandle" mousedown.delegate="processResizerMouseDown($event)">&nbsp;</div></div><i class="ac control-RedArrowDown arrow-down" ref="elemArrowDown" show.bind="showDragArrows"></i> <i class="ac control-RedArrowUp arrow-up" ref="elemArrowUp" show.bind="showDragArrows"></i></div><div class="grid-content"><div class="grid-content-wrap" scroll.trigger="processRowsScroll($event)" ref="elemContentWrap" tabindex="${config.tabIndex}" keydown.delegate="processKeyDown($event)" selectstart.delegate="processSelectStart($event)"><table ref="elemRows" if.bind="rows != null"><colgroup><col if.bind="config.showRowSelectors" class="row-selector-col"><col repeat.for="col of visibleCols" css="width: ${col.width ? (col.width + \'px\'): null};"></colgroup><tbody><tr virtual-repeat.for="r of rows" infinite-scroll-next="getMoreRows" data-index="${$index}" class="${$odd ? \'alt-row\' : \'\'} ${activeRowIndex == $index ? \'active\' : \'\'}"><td if.bind="config.showRowSelectors" class="row-selector" click.delegate="processRowSelectorClick($event, r)"><i class="ac control-CurrentRow" if.bind="activeRowIndex == $index"></i><template else>&nbsp;</template></td><td repeat.for="col of visibleCols" class="${activeCellIndex == $index ? \'active\' : \'\'}" css="text-align:${getColAlign(col.textAlign)}" click.delegate="processCellClick($event, $index, $parent.r)" dblclick.delegate="processCellDblClick($event, $index, $parent.r)"><let cell.bind="$parent.r.cells[col.field]"></let><template if.bind="col.dataType == 3"><i class="ac control-Grid${cell.value ? \'Check\' : \'Uncheck\'}"></i></template><template else><template if.bind="!!cell.text"><template repeat.for="s of markFilterText(cell.text)"><mark if.bind="s.highlight">${s.text}</mark><template else>${s.text}</template></template></template><template else>&nbsp;</template></template></td></tr></tbody></table></div></div></template>'}));define("controls/global/index",["require","exports","./tooltip/qp-tooltip","./color-picker/qp-color-picker","./suggester/qp-editor-wrapper","./text-editor/qp-text-editor","./number-editor/qp-number-editor","./field-editor/qp-field-editor","./last-update/last-update","./grid/qp-grid","./loader-indicator/qp-loader-indicator","./tooltip/qp-extention-cord","./branch-selector/qp-branch-selector-3d"],(function(e,t,r,n,i,o,a,s,l,d,c,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configure=void 0;function h(e){e.globalResources([p.QpBranchSelector3dCustomElement,n.QpColorPickerCustomElement,i.QpEditorWrapperCustomElement,o.QpTextEditorCustomElement,a.QpNumberEditorCustomElement,s.QpFieldEditorCustomElement,l.QpLastUpdateCustomElement,r.QpTooltipCustomElement,c.QpLoaderIndicatorCustomElement,u.QpExtentionCordCustomAttribute,d.QpGridCustomElement,"./text-editor/converter"])}t.configure=h}));define("controls/global/last-update/last-update",["require","exports","tslib","aurelia-framework"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpLastUpdateCustomElement=void 0;var i=function(){function e(){}e.prototype.valueChanged=function(e){this.dateTime=new Date(e)};r.__decorate([n.bindable,r.__metadata("design:type",String)],e.prototype,"value",void 0);e=r.__decorate([n.customElement("qp-last-update")],e);return e}();t.QpLastUpdateCustomElement=i}));define("controls/global/last-update/last-update-value-converter",["require","exports","aurelia-binding","apps/enhance/services/localization"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AgoValueConverter=void 0;var i="ago-signal";var o=2e4;var a=60;var s=24;var l=7;var d=1e3;setInterval((function(){r.signalBindings(i)}),o);var c=n.LOCALIZED_STRINGS&&n.LOCALIZED_STRINGS.lastUpdate||{JustNow:"Updated just now",MinsAgo:"Updated {{mins}} min ago",HoursAgo:"Updated {{hours}} hr ago"},u=c.JustNow,p=c.MinsAgo,h=c.HoursAgo,g=c.DaysAgo,f=c.LongAgo;var v=function(){function e(){this.signals=[i]}e.prototype.toView=function(e){if(!e){return""}var t=new Date;var r=Math.floor((t.valueOf()-e.valueOf())/d);if(r<a){return u}var n=Math.floor(r/a);if(n<a){return p.replace("{{mins}}",n.toString())}var i=Math.floor(n/a);if(i<=s){return h.replace("{{hours}}",i.toString())}var o=Math.floor(i/s);if(o<=l){return g.replace("{{days}}",i.toString())}return f};return e}();t.AgoValueConverter=v}));define("text!controls/global/last-update/last-update.html",[],(function(){return'<template><require from="./last-update-value-converter"></require> ${dateTime | ago} </template>'}));define("controls/global/loader-indicator/qp-loader-indicator",["require","exports","tslib","aurelia-framework"],(function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpLoaderIndicatorCustomElement=void 0;var i=function(){function e(){}Object.defineProperty(e.prototype,"loadingClass",{get:function(){return this.loadingState===true?"loading":this.loadingState?this.loadingState:"in-sync"},enumerable:false,configurable:true});r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"loadingState",void 0);r.__decorate([n.computedFrom("loadingState"),r.__metadata("design:type",Object),r.__metadata("design:paramtypes",[])],e.prototype,"loadingClass",null);e=r.__decorate([n.customElement("qp-loader-indicator")],e);return e}();t.QpLoaderIndicatorCustomElement=i}));define("text!controls/global/loader-indicator/qp-loader-indicator.css",[],(function(){return".loader-indicator-img {\r\n    color:#999999;\r\n    color:var(#999999, --primary-color);\r\n}\r\n\r\n.loader-indicator-img .progress {\r\n  stroke-width: 10;\r\n  stroke: currentColor;\r\n  stroke-linecap: square;  \r\n  -webkit-animation: dash 2.5s infinite;  \r\n          animation: dash 2.5s infinite;\r\n}\r\n\r\n\r\n@-webkit-keyframes dash {\r\n  0% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  25% {\r\n    stroke-dasharray: 250, 0;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  50% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: -250;\r\n  }\r\n\r\n  75% {\r\n    stroke-dasharray: 250, 0;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  100% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: 0;\r\n  }\r\n}\r\n\r\n\r\n@keyframes dash {\r\n  0% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  25% {\r\n    stroke-dasharray: 250, 0;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  50% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: -250;\r\n  }\r\n\r\n  75% {\r\n    stroke-dasharray: 250, 0;\r\n    stroke-dashoffset: 0;\r\n  }\r\n\r\n  100% {\r\n    stroke-dasharray: 0, 250;\r\n    stroke-dashoffset: 0;\r\n  }\r\n}\r\n"}));define("text!controls/global/loader-indicator/qp-loader-indicator.html",[],(function(){return'<template class="qp-loader-indicator" class.bind="loadingClass"><require from="./qp-loader-indicator.css"></require><template if.bind="loadingState==\'in-sync\'"><template replaceable part="in-sync"></template></template><template if.bind="loadingState==\'will-load\'"><template replaceable part="will-load"></template></template><template if.bind="loadingState==\'loading\'"><template replaceable part="loading"><svg class="loader-indicator-img" height="3px" width="100%" viewBox="80 0 235 10" preserveAspectRatio="none"><path class="progress" stroke-width="4" d="M70,10 l250,0"></path></svg></template></template></template>'}));define("controls/global/number-editor/converter",["require","exports","tslib","aurelia-framework","apps/enhance/services/control-helper"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NumberEditorValueConverter=void 0;var o=function(){function e(){this.minusSymbol="-";this.dotSymbol=".";this.decimalSeparator=".";this.groupSeparator=",";this.getDecimals=function(e){return e.decimals<0?0:e.decimals};var e=i.numberFormatInfo;if(e){this.minusSymbol=e.negativeSign;this.decimalSeparator=e.number.decimalSeparator;this.groupSeparator=e.number.groupSeparator}}e.prototype.toView=function(e,t,r){if(r==null)return"";if(r.allowNull&&e==null)return t?"":r.nullText;if(!r.allowNull&&e==null){e=0}if(!r.enabled||r.readOnly){t=false}var n=t?r.editFormat:r.displayFormat;if(n){return e.format(n,i.numberFormatInfo)}return t?this.getEditText(e,r):this.getDisplayText(e,r)};e.prototype.fromView=function(e,t,r){if(r.allowNull&&(!e||e===r.nullText))return null;return this.checkLimits(this.parseValue(e,r),r)};e.prototype.getEditText=function(e,t){var r;try{r=e.toFixed(this.getDecimals(t))}catch(e){r=(0).toFixed(this.getDecimals(t))}return r.replace(this.dotSymbol,this.decimalSeparator)};e.prototype.getDisplayText=function(e,t){var r=t.valueType>=i.NetType.Single&&t.valueType<=i.NetType.Decimal;var n=this.getDecimals(t);var o=e.toLocaleString("en-US",{minimumFractionDigits:n,useGrouping:r});var a=o.split(this.dotSymbol);o=a[0].replace(/,/g,this.groupSeparator);return a.length>1?o+this.decimalSeparator+a[1]:o};e.prototype.checkLimits=function(e,t){if(e!=null&&!isNaN(e)){var r=t.minValue;var n=t.maxValue;if(r!=null&&e<r){return r}if(n!=null&&e>n){return n}}return e};e.prototype.parseValue=function(e,t){var r=0;var n="";if(this.decimalSeparator!==" "){e=e.replace(/\s/g,"")}else{e=e.replace(/[\t\n\r\f]/g,"")}for(var o=0;o<e.length;o++){var a=e.charAt(o);if(i.isDigit(a)||a===this.minusSymbol){n+=a}else if(a===this.decimalSeparator||a===this.dotSymbol&&this.groupSeparator!==this.dotSymbol){n+=this.dotSymbol}}r=this.parseFloat(n);return isNaN(r)?0:Number(r.toFixed(this.getDecimals(t)))};e.prototype.parseFloat=function(e){var t=e.length;var r=e.indexOf(this.decimalSeparator);var n=14;if(r<0){r=e.indexOf(this.dotSymbol)}if(r>=0){t=r}if(t>n){var i=t-n;return parseFloat(e.substr(i))}return parseFloat(e)};e=r.__decorate([n.autoinject,r.__metadata("design:paramtypes",[])],e);return e}();t.NumberEditorValueConverter=o}));define("controls/global/number-editor/qp-number-editor",["require","exports","tslib","aurelia-framework","aurelia-logging","apps/enhance/services/control-helper","./converter","../text-editor/qp-text-editor"],(function(e,t,r,n,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpNumberEditorCustomElement=void 0;var l=i.getLogger("number-editor");var d=function(e){r.__extends(t,e);function t(t,r){var n=e.call(this,t,r)||this;n.element=t;n.tq=r;n.maxDecimals=null;n.conv=new a.NumberEditorValueConverter;n.converter="numb";return n}i=t;t.prototype.configChanged=function(e,t){if(t===undefined){o.applyDefaultValues(e,r.__assign(r.__assign({},i.defaultConfig),i.defaultConfigN));if(!this.config.allowNull&&this.value==null&&this.config.value==null){this.value=0}}};t.prototype.getDecimals=function(){return this.conv.getDecimals(this.config)};t.prototype.isMinus=function(e){var t=45;return e===this.conv.minusSymbol.charCodeAt(0)||e===t};t.prototype.sendInputEvent=function(){var e=document.createEvent("HTMLEvents");e.initEvent("input",true,true);this.elemText.dispatchEvent(e)};t.prototype.processPasteValue=function(e){var t=e&&e.trim();var r=this.elemText.value;var n=new String(r);var i=this.elemText.selectionStart||0;var o=this.elemText.selectionEnd||0;t=t.replace(new RegExp(this.conv.groupSeparator,"g"),"");t=t.replace(new RegExp(" ","g"),"");t=t.replace(new RegExp("s","g"),"");t=t.replace(this.conv.decimalSeparator,this.conv.dotSymbol);t=t.replace(/\+/,"");var a=t.search(/[^0-9.\-]/);if(a>=0){return true}if(i!==0&&t.search(/[\-\+]/)>=0){return true}if(i>=0){r=r.substring(0,i)+t+r.substring(o)}else{r=t}var s=this.conv.parseValue(r,this.config);if(!isNaN(s)&&this.conv.checkLimits(s,this.config)===s){this.elemText.value=this.conv.getEditText(s,this.config)}else{this.elemText.value=n.toString()}this.sendInputEvent();return true};t.prototype.onKeyPress=function(e,t){var r=7;var n=8;var i=32;var a=15;if(t<r||t>n&&t<i){return false}var s=this.elemText.value;var l=s.length;var d=this.elemText.selectionStart||0;var c=this.elemText.selectionEnd||0;if(d!==c){s=s.substring(0,d)+s.substring(c);c=d;l=s.length}else if(t===r||t===n){return true}var u=0;var p=l;var h=false;if(this.config.editFormat){var g="";var f=void 0;for(var v=0;v<s.length;v++){f=s.charAt(v);if(o.isDigit(f)||f===this.conv.minusSymbol){g+=f}else if(f===this.conv.decimalSeparator){g+=this.conv.dotSymbol}else{l--;if(v<d){d--}if(v<c){c--;u++}}}s=g}if(t===this.conv.dotSymbol.charCodeAt(0)){t=this.conv.decimalSeparator.charCodeAt(0)}var b=s.indexOf(this.conv.decimalSeparator);if(t>n&&(!this.config.maxLength||this.config.maxLength<=0||this.config.maxLength>l)){var m=t===this.conv.decimalSeparator.charCodeAt(0);var y=o.isDigit(t)||m&&this.getDecimals()>0||d===0&&this.isMinus(t)&&this.config.minValue<0;if(!y){return false}if(l>0&&d===0&&this.isMinus(s.charCodeAt(0))){return false}if(m){if(b>=0){if(b===d||b===d-1){return false}l--;if(b<d){d=--c}s=s.substring(0,b)+s.substring(b+1)}if(l-d>this.getDecimals()){return false}}else if(this.getDecimals()>0&&b>=0){var x=l-b-1;if(x===this.getDecimals()&&d>b){h=true}}var w=String.fromCharCode(t);if(c>=l){if(h){s=s.substring(0,l-1)}s+=w}else{var _=h?c+1:c;s=s.substring(0,d)+w+s.substring(_)}}var C=s.length;b=s.indexOf(this.conv.decimalSeparator);if(b>=0){C=b;if(this.maxDecimals){var S=parseInt(s.substring(b+1));if(S>this.maxDecimals){return false}}}if(C<a){if(this.config.editFormat){var k=this.conv.parseFloat(s);if(!isNaN(k)){s=k.format(this.config.editFormat,o.numberFormatInfo);u+=s.length-p-(h?0:1)}}this.elemText.value=s;this.select(c+1+u);this.sendInputEvent()}return false};var i;t.defaultConfigN={allowNull:false,decimals:0,maxValue:999999999999,minValue:-999999999999,valueType:o.NetType.Int32};r.__decorate([n.bindable,r.__metadata("design:type",Object)],t.prototype,"config",void 0);t=i=r.__decorate([n.autoinject,n.customElement("qp-number-editor"),n.useView("../text-editor/qp-text-editor.html"),r.__metadata("design:paramtypes",[Element,n.TaskQueue])],t);return t}(s.QpTextEditorCustomElement);t.QpNumberEditorCustomElement=d}));define("controls/global/suggester/elements/qp-suggester",["require","exports","tslib","apps/enhance/services/localization","aurelia-event-aggregator","aurelia-framework","aurelia-logging","apps/enhance/services/suggestings-service","plugins/happeded-on-body"],(function(e,t,r,n,i,o,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpSuggesterCustomElement=void 0;var d=a.getLogger("qp-suggester");var c=2;var u=386;var p=168;var h=32;var g=7;var f=24;var v=function(){function e(e,t,r,i){this.eventManager=e;this.suggestingServiceFabric=t;this.eventAggregator=r;this.taskQueue=i;this.debounceState={delay:336,timeoutId:undefined};this.eventSubscriptions=[];this.forceOpen=false;this.maxHeight=p;this.maxWidth=u;this.suggesting=false;this.serializedArgs="";this.localizedStrings=n.LOCALIZED_STRINGS}e.prototype.attached=function(){var e=this;this.eventSubscriptions.push(this.eventManager.addEventListener(this.editor,"input",(function(t){return e.handleEditorInput(t)}),o.delegationStrategy.capturing,true));this.eventSubscriptions.push(this.eventManager.addEventListener(this.editor,"keydown",(function(t){return e.handleEditorKeyDown(t)}),o.delegationStrategy.capturing,true));this.eventSubscriptions.push(this.eventManager.addEventListener(this.editor,"blur",(function(t){return e.handleEditorBlur(t)}),o.delegationStrategy.capturing,true));this.eventSubscriptions.push(this.eventManager.addEventListener(this.editor,"focus",(function(t){return e.handleEditorFocus(t)}),o.delegationStrategy.capturing,true));this.eventSubscriptions.push(this.eventManager.addEventListener(this.editor,"click",(function(t){return e.handleEditorClick(t)}),o.delegationStrategy.capturing,true));if(document.activeElement===this.editor){this.focused=true}var t=this.rectElement.getBoundingClientRect().width;this.minWidth=t};e.prototype.configChanged=function(){this.config.suggestAfter=this.config.suggestAfter||c;var e=[this.config.valueField&&this.config.valueField.toLowerCase(),this.config.descriptionName&&this.config.descriptionName.toLowerCase()].filter((function(e){return e!=null}));this.fieldsToRequest=this.config.fields.filter((function(t){return e.includes(t.id.toLowerCase())}))};e.prototype.forceOpenChanged=function(e,t){var r=this;if(e){if(!this.suggesting){this.taskQueue.queueTask((function(){r.MoveHighligt(1)}))}}else{if(this.suggesting){this.hideSuggestions()}}};e.prototype.changeHighLight=function(e){if(!this.preventHoverHighlight){this.scrollSuggestionIntoView(e);this.taskQueue.flushTaskQueue();this.highlightedSugestionIndex=e}};e.prototype.debounceHoverHighlight=function(){var e=this;this.preventHoverHighlight=true;clearTimeout(this.preventHoverHighlightTimeout);this.preventHoverHighlightTimeout=setTimeout((function(){e.preventHoverHighlight=false}),h)};e.prototype.unsubscribeFromMouseDownOnDocument=function(){var e;(e=this.documentMouseDownSubscription)===null||e===void 0?void 0:e.dispose();this.documentMouseDownSubscription=undefined};e.prototype.detached=function(){this.unsubscribeFromMouseDownOnDocument();this.eventSubscriptions.forEach((function(e){return e.dispose()}));this.eventSubscriptions=[];this.loading=undefined};e.prototype.ensureSuggesterService=function(){var e=this;var t=this.suggestingsService===undefined||this.config.inlineArgs;var r=this.config.inlineArgs;var n;if(this.config.dependsOn&&this.config.dependsOn.length){try{n=this.config.dependsOn.map((function(t){var r;var n=t.id;var i=__px_all(e.editor)[t.controlID];var o=(r=i===null||i===void 0?void 0:i.element)===null||r===void 0?void 0:r.getBoundingClientRect(),a=o.width,s=o.height;var l;if(a>0&&s>0){l=i.getValue()}else{if(t.controlID.indexOf("_lv0_")>0){var d=t.controlID.split("_lv0_"),c=d[0],u=d[1];var p=e.editor;while(p&&p.id!==c){p=p.parentElement}if(p===null||p===void 0?void 0:p.object){var h=p.object;var g=h.levels[0].columns.find((function(e){return e.formEditorID===u})).index;l=h.activeRow.cells[g].getValue()}}}if(l instanceof Object&&l.id){l=l.id}return{id:n,value:l}}));var i=JSON.stringify(n);if(this.serializedArgs!==i){t=true;this.serializedArgs=i}}catch(e){r=true}}if(t){this.suggestingsService=this.suggestingServiceFabric.getSuggestingService({args:n,descriptionName:this.config.descriptionName,fields:this.fieldsToRequest,graph:this.config.graph,graphStateId:this.config.graphStateId,inlineArgs:r,pageSize:7,serverFiltering:this.config.serverFiltering,valueField:this.config.valueField,viewName:this.config.viewName})}};e.prototype.handleEditorBlur=function(e){clearTimeout(this.debounceState.timeoutId);this.focused=false;if(this.suggestingsService){this.suggestingsService.abortRequest()}this.hideSuggestions();return true};e.prototype.handleEditorClick=function(e){if(e.altKey&&!e.ctrlKey){e.preventDefault();e.stopImmediatePropagation();this.MoveHighligt(1)}return true};e.prototype.handleEditorFocus=function(e){this.focused=true;return true};e.prototype.handleEditorInput=function(e){var t=this;this.loading=true;var r=this.editor.value;if(r.length>=this.config.suggestAfter||this.suggesting){clearTimeout(this.debounceState.timeoutId);this.debounceState.timeoutId=setTimeout((function(){t.ensureSuggesterService();t.suggestingsService.getSuggestions(r).then((function(e){t.suggestions=e;t.showSuggestions();t.loading=false;t.scrollSuggestionIntoView(0)})).catch((function(e){t.loading=false;if(e.name==="AbortError"){d.info("suggestions request aborted by user input")}else{throw e}}))}),this.debounceState.delay)}};e.prototype.handleEditorKeyDown=function(e){switch(e.key){case"Esc":case"Escape":if(this.suggesting){this.hideSuggestions();e.preventDefault();e.stopImmediatePropagation()}break;case"Enter":if(this.suggesting&&!this.loading){this.select(this.highlightedSugestionIndex)}return true;break;case"Up":case"ArrowUp":if(!!this.suggesting!==e.altKey){this.debounceHoverHighlight();e.preventDefault();e.stopImmediatePropagation();this.MoveHighligt(-1)}break;case"Down":case"ArrowDown":if(!!this.suggesting!==e.altKey){this.debounceHoverHighlight();e.preventDefault();e.stopImmediatePropagation();this.MoveHighligt(1)}break;case"PageDown":this.debounceHoverHighlight();e.preventDefault();e.stopImmediatePropagation();this.MoveHighligt(g);break;case"PageUp":this.debounceHoverHighlight();e.preventDefault();e.stopImmediatePropagation();this.MoveHighligt(-g);break;default:return true}};e.prototype.handleScroll=function(e){this.debounceHoverHighlight();var t=e.target;if(this.suggestions&&!this.suggestions.loading&&this.suggestions.haveMore&&this.suggestions.loadMore&&t.scrollTop+t.clientHeight+g*f>t.scrollHeight){this.suggestions.loadMore()}};e.prototype.hideSuggestions=function(){if(!this.suggesting){return}this.unsubscribeFromMouseDownOnDocument();this.suggesting=false;this.suggestions=undefined;if(this.forceOpen){this.forceOpen=false}};e.prototype.ignoreClicks=function(e){e.preventDefault();e.stopImmediatePropagation()};e.prototype.MoveHighligt=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;var n=this;return r.__generator(this,(function(r){switch(r.label){case 0:if(!!this.suggesting)return[3,3];if(!!this.suggestions)return[3,2];this.loading=true;this.ensureSuggesterService();return[4,this.suggestingsService.getSuggestions("").then((function(e){n.suggestions=e;n.loading=false})).catch((function(e){if(e.name==="AbortError"){d.info("suggestions request aborted by user input")}else{throw e}}))];case 1:r.sent();r.label=2;case 2:this.showSuggestions();return[2];case 3:t=this.highlightedSugestionIndex+e;if(t<0){t=0}if(t>this.suggestions.suggestionItems.length-1){t=this.suggestions.suggestionItems.length-1}this.scrollSuggestionIntoView(t);this.taskQueue.flushTaskQueue();this.highlightedSugestionIndex=t;return[2]}}))}))};e.prototype.scrollSuggestionIntoView=function(e){var t;var r;r="nearest";if(e===this.suggestions.suggestionItems.length-1){r="start"}var n=(t=this.suggestionsContainer)===null||t===void 0?void 0:t.querySelectorAll("qp-suggestion")[e];if(n){var i="scrollBehavior"in document.documentElement.style?{block:r}:undefined;n.scrollIntoView(i)}};e.prototype.select=function(e,t){if(t===void 0){t=undefined}var r=this.suggestions.suggestionItems[e];this.setEditorValue({display:r.display,useUpdateValue:!!t,value:r.value});if(t){t.preventDefault();t.stopImmediatePropagation()}this.hideSuggestions()};e.prototype.showSuggestions=function(){var e=this;if(!this.focused){return}if(!this.suggesting){this.suggesterWidth=undefined;this.documentMouseDownSubscription=this.eventAggregator.subscribe(l.MOUSE_DOWN_REACHED_BODY,(function(){return e.hideSuggestions()}));this.suggesting=true;this.taskQueue.queueTask((function(){if(e.suggestionsContainer){var t=e.suggestionsContainer.getBoundingClientRect().width;e.suggesterWidth=t}}))}this.highlightedSugestionIndex=0};r.__decorate([o.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([o.bindable,r.__metadata("design:type",HTMLElement)],e.prototype,"editor",void 0);r.__decorate([o.bindable,r.__metadata("design:type",HTMLElement)],e.prototype,"rectElement",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Function)],e.prototype,"setEditorValue",void 0);r.__decorate([o.bindable,r.__metadata("design:type",Boolean)],e.prototype,"forceOpen",void 0);e=r.__decorate([o.autoinject,r.__metadata("design:paramtypes",[o.EventManager,s.SuggestingsServiceFabric,i.EventAggregator,o.TaskQueue])],e);return e}();t.QpSuggesterCustomElement=v}));define("text!controls/global/suggester/elements/qp-suggester.css",[],(function(){return"/* qp-editor-wrapper,\r\nqp-editor-wrapper * {\r\n  box-sizing: border-box;\r\n\r\n} */\r\n\r\nqp-suggester {\r\n  display: block;\r\n  position: absolute;\r\n  /* z-index: 1000; */\r\n  top: 100%;\r\n  /* overflow: hidden; */\r\n\r\n\r\n}\r\n\r\n.qp-suggester,\r\n.qp-suggester * {\r\n  -webkit-box-sizing: border-box;\r\n          box-sizing: border-box;\r\n\r\n\r\n}\r\n\r\n.qp-suggester.loading{\r\n  -webkit-filter:grayscale(.5);\r\n          filter:grayscale(.5);\r\n}\r\n.qp-suggester.show-above {\r\n  -webkit-transform:translateY(-100%);\r\n          transform:translateY(-100%);\r\n  -webkit-transform:translateY(calc(-100% - 1px));\r\n          transform:translateY(calc(-100% - 1px));\r\n}\r\n\r\n.qp-suggester.show-left {\r\n  -webkit-transform:translateX(-100%);\r\n          transform:translateX(-100%);  \r\n}\r\n\r\n.qp-suggester.show-left.show-above {\r\n  -webkit-transform:translate(-100%,-100%);\r\n          transform:translate(-100%,-100%);  \r\n}\r\n\r\nqp-suggestion {\r\n  display: block;\r\n  height:24px;\r\n  padding: 4px 6px;\r\n  font-size: 13px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  cursor: pointer;\r\n  max-width: 90vw;\r\n  \r\n}\r\n\r\n\r\n.loading-placeholder.loading {\r\n  position: relative;\r\n}\r\n.loading-placeholder.loading:before{\r\n  position: absolute;\r\n  top:2px;\r\n  left: 5px;\r\n  right:5px;\r\n  bottom: 2px;\r\n  content:'';\r\n  background-color: #ccc;\r\n}\r\n"}));define("text!controls/global/suggester/elements/qp-suggester.html",[],(function(){return'<template><require from="./qp-suggester.css"></require><div if.bind="suggesting && suggestions" ref="suggestionsContainer" glue-to.bind="rectElement" class="qp-suggester ${loading || suggestions.loading ?\'loading\':\'\'}" css="max-height:${maxHeight}px;overflow-y:auto; ${suggesterWidth?\'width:\'+suggesterWidth+\'px;\':\'\' } background-color:white; max-width:${maxWidth}px;" scroll.trigger="handleScroll($event)" mousedown.capture="ignoreClicks($event)"><qp-suggestion repeat.for="i of suggestions.suggestionItems" extention-cord="force-show.bind: $index == highlightedSugestionIndex & debounce:32; manual-show-only:true" class="${$index==highlightedSugestionIndex?\'suggestion-highlight\':\'\'}" mouseenter.capture="changeHighLight($index)" click.delegate="select($index,$event)"><template repeat.for="s of i.segments"><mark if.bind="s.highlight">${s.text}</mark><template else>${s.text}</template></template></qp-suggestion><qp-suggestion if.bind="suggestions.haveMore" repeat.for="i of 1" class="loading-placeholder ${suggestions.loading}">loading</qp-suggestion><div if.bind="suggestions.totalCount==0" style="padding:5px .5em;color:#888;font-size:13px;white-space:nowrap;text-overflow:ellipsis" class="no-results-found"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" style="vertical-align:bottom;margin-right:.5em" fill="currentColor"><g id="sad" stroke="none" stroke-width=".8" fill="none" fill-rule="evenodd"><g id="Group" fill="#c8930c"><circle cx="10.84" cy="5.68" r="1.03"></circle><circle cx="5.16" cy="5.68" r="1.03"></circle><path d="M8,0 C3.58177778,0 0,3.58177778 0,8 C0,12.4182222 3.58177778,16 8,16 C12.4182222,16 16,12.4182222 16,8 C16,3.58177778 12.4182222,0 8,0 Z M8,14.6671111 C4.31822222,14.6671111 1.33333333,11.6822222 1.33333333,8.00044444 C1.33333333,4.31844444 4.31822222,1.33333333 8,1.33333333 C11.6822222,1.33333333 14.6671111,4.31822222 14.6671111,8.00022222 C14.6671111,11.6822222 11.6822222,14.6671111 8,14.6671111 Z" fill-rule="nonzero"></path><path d="M11.1988131,12.3870968 C10.9618705,12.3870968 10.7318091,12.2666654 10.6093237,12.0538815 C10.0854351,11.1424204 9.08513805,10.5760202 7.99974353,10.5760202 C6.91411964,10.5760202 5.914052,11.1424204 5.39016335,12.0538815 C5.21125217,12.3649409 4.80250892,12.4785719 4.47748694,12.307248 C4.15223558,12.1363627 4.03342021,11.7454545 4.21233139,11.434395 C4.97247455,10.1118441 6.42394887,9.29032258 7.99997291,9.29032258 C9.57576756,9.29032258 11.0274713,10.1120635 11.7876144,11.434395 C11.9665256,11.7454545 11.8479396,12.1361433 11.5226882,12.307248 C11.4194703,12.3614311 11.3084536,12.3870968 11.1988131,12.3870968 Z"></path></g></g></svg> ${localizedStrings.noResultsFound} </div></div></template>'}));define("controls/global/suggester/qp-editor-wrapper",["require","exports","tslib","aurelia-framework","aurelia-logging"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpEditorWrapperCustomElement=void 0;var o=i.getLogger("qp-editor-wrapper");var a=function(){function e(e,t){this.element=e;this.tq=t}e.prototype.attached=function(){this.editor=this.element.querySelector(".editor");if(this.editor){this.editor.setAttribute("autocomplete","off");this.editor.setAttribute("autocorrect","off")}this.selector=this.element.querySelector(".selector");this.rectElement=this.selector||this.editor;if(!this.selector){o.warn("no selector",this.element)}else{if(!this.selector.object){o.error("no object",this.selector)}else{this.selector.object.autoComplete=0}}};e.prototype.setEditorValue=function(e,t,r){var n=this;var i;if(this.selector&&this.selector.object){var a=this.selector.object;if(this.editor!=null){var s=this.editor.value.trim();if(s===""||s!==e){a.setValue("","")}var l=a.hasHint?e+" - "+t:t;(i=this.editor)===null||i===void 0?void 0:i.setAttribute("unblock","1");a.updateValue(e,l);this.tq.queueTask((function(){var e;return(e=n.editor)===null||e===void 0?void 0:e.removeAttribute("unblock")}))}else{o.warn("no px object")}}};r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);e=r.__decorate([n.autoinject,n.customElement("qp-editor-wrapper"),r.__metadata("design:paramtypes",[Element,n.TaskQueue])],e);return e}();t.QpEditorWrapperCustomElement=a}));define("text!controls/global/suggester/qp-editor-wrapper.html",[],(function(){return'<template><require from="./elements/qp-suggester"></require><slot></slot><qp-suggester if.bind="config && config.suggester && editor" editor.two-way="editor" rect-element.bind="rectElement" set-editor-value.call="setEditorValue(value,display,useUpdateValue)" config.bind="config.suggester"></qp-suggester></template>'}));define("controls/global/text-editor/converter",["require","exports","tslib","aurelia-framework","../number-editor/converter"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MetaValueConverter=t.TextEditorValueConverter=void 0;var o=function(){function e(){}e.prototype.toView=function(e,t,r){if(!t&&r&&r.allowNull&&!e){return r.nullText}return e!=null?e.toString():""};e.prototype.fromView=function(e,t,r){if(r.allowNull&&(!e||e===r.nullText))return null;return e};return e}();t.TextEditorValueConverter=o;var a=function(){function e(e,t){this.text=e;this.numb=t}e.prototype.toView=function(e,t,r,n){var i=this[t];return i&&i.toView?i.toView(e,r,n):e};e.prototype.fromView=function(e,t,r,n){var i=this[t];return i&&i.fromView?i.fromView(e,r,n):e};e=r.__decorate([n.autoinject,r.__metadata("design:paramtypes",[o,i.NumberEditorValueConverter])],e);return e}();t.MetaValueConverter=a}));define("controls/global/text-editor/qp-text-editor",["require","exports","tslib","aurelia-framework","aurelia-logging","apps/enhance/services/control-helper"],(function(e,t,r,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpTextEditorCustomElement=void 0;var a=i.getLogger("text-editor");var s=function(){function e(e,t){var r=this;this.element=e;this.tq=t;this.converter="text";this.hasFocus=false;this.getDisabled=function(){return!r.config.enabled||r.config.readOnly}}t=e;e.prototype.configChanged=function(e,r){if(r===undefined){o.applyDefaultValues(e,t.defaultConfig)}};e.prototype.isTextArea=function(){return this.elemText.tagName==="TEXTAREA"};e.prototype.sendUpdateEvent=function(){var e=document.createEvent("HTMLEvents");e.initEvent("update",true,false);this.elemText.dispatchEvent(e)};e.prototype.select=function(e,t){if(e===void 0){e=null}if(t===void 0){t=null}if(!this.config.hidden){if(e==null||t==null){if(e!=null){this.elemText.setSelectionRange(e,e)}else{this.elemText.select()}}else{this.elemText.setSelectionRange(e,t)}}};e.prototype.selectContent=function(){var e=this;if(!o.isVisible(this.elemText)){return}if(this.config&&(this.config.selectOnFocus||this.getDisabled())){this.tq.queueMicroTask((function(){return e.select()}))}};e.prototype.processKeyDown=function(e){var t=127;var r=7;var n=8;var i=e.key&&e.key.length===1&&!e.ctrlKey&&!e.metaKey&&!e.altKey;var o=i?e.key[0].charCodeAt(0):null;switch(e.key){case"Backspace":o=n;break;case"Delete":o=r;break;case"Enter":var a=this.elemText;var s=a.resizer;if(s!=null&&this.isTextArea()&&(e.ctrlKey||e.metaKey)){var l=a.selectionEnd;a.value=a.value.substring(0,l)+"\n"+a.value.substring(l);a.selectionEnd=l+1;if(s&&s.adjust)s.adjust();break}if(!e.shiftKey&&!this.getDisabled()){this.sendUpdateEvent()}break}if(o!=null){if(this.getDisabled()||o>t&&this.config.asciiCharSet){return false}return this.onKeyPress(e,o)}return true};e.prototype.onKeyPress=function(e,t){return true};e.prototype.processFocus=function(e){this.hasFocus=true;this.selectContent()};e.prototype.processBlur=function(e){this.hasFocus=false};e.prototype.processValueUpdate=function(e){var t=this;var r=this.elemText.value;this.tq.queueMicroTask((function(){return t.elemText.value=r}))};e.prototype.processPaste=function(e){if(this.getDisabled()){return false}var t=e.clipboardData?e.clipboardData:n.PLATFORM.global.clipboardData;if(t!=null){var r=t.getData("Text");if(this.processPasteValue(r)){return false}}return true};e.prototype.processPasteValue=function(e){return false};Object.defineProperty(e.prototype,"textMode",{get:function(){if(this.config==null){return"text"}switch(this.config.type){case 2:return"password";case 3:return"color"}return"text"},enumerable:false,configurable:true});Object.defineProperty(e.prototype,"align",{get:function(){if(this.config==null){return""}switch(this.config.textAlign){case 1:return"left";case 2:return"center";case 3:return"right";case 4:return"justify"}return""},enumerable:false,configurable:true});var t;e.defaultConfig={allowNull:true,enabled:true,selectOnFocus:true,spellcheck:true,type:0};r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"config",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Object)],e.prototype,"value",void 0);r.__decorate([n.bindable({defaultBindingMode:n.bindingMode.oneTime}),r.__metadata("design:type",String)],e.prototype,"converter",void 0);r.__decorate([n.computedFrom("config.type"),r.__metadata("design:type",String),r.__metadata("design:paramtypes",[])],e.prototype,"textMode",null);r.__decorate([n.computedFrom("config.textAlign"),r.__metadata("design:type",String),r.__metadata("design:paramtypes",[])],e.prototype,"align",null);e=t=r.__decorate([n.customElement("qp-text-editor"),n.autoinject,r.__metadata("design:paramtypes",[Element,n.TaskQueue])],e);return e}();t.QpTextEditorCustomElement=s}));define("text!controls/global/text-editor/qp-text-editor.css",[],(function(){return'\r\nqp-text-editor, qp-number-editor \r\n{\r\n\tdisplay: block;\r\n}\r\n\r\nqp-text-editor[style*="width"] > *, qp-number-editor[style*="width"] > *\r\n{\r\n\twidth: 100% !important;\r\n}\r\n\r\nqp-text-editor[style*="height"] > *, qp-number-editor[style*="height"] > *\r\n{\r\n\theight: 100% !important;\r\n}\r\n\r\ninput.qp-text-editor {\r\n\tborder: #D2D4D7 1px solid;\r\n\tpadding: 3px 6px;\r\n\tmargin-bottom: 0px;\r\n\tmargin-top: 0px;\r\n\tbox-sizing: border-box;\r\n\theight: 24px;\r\n\t-webkit-box-sizing: border-box;\r\n\t-moz-box-sizing: border-box;\r\n\toutline: none;\r\n}\r\n\r\ninput.qp-text-editor[readonly] {\r\n\tbackground-color: #F5F7F8;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: transparent;\r\n\tborder-right-color: transparent;\r\n\tborder-width: 1px;\r\n}\r\n\r\ninput.qp-text-editor[enabled="false"], input.qp-text-editor[disabled] {\r\n\tbackground-color: transparent;\r\n\t-webkit-box-shadow: none;\r\n\t        box-shadow: none;\r\n\tborder-color: transparent;\r\n\tborder-bottom-color: #E0E4E8;\r\n\tborder-bottom-style: dotted;\r\n\tborder-width: 1px;\r\n}\r\n\r\ninput.qp-text-editor:focus {\r\n\tborder: 1px solid #007ACC;\r\n\tborder: 1px solid var(--primary-color, #007ACC);\r\n\t-webkit-box-shadow: 0px 0px 2px 0px #007ACC;\r\n\t        box-shadow: 0px 0px 2px 0px #007ACC;\r\n\t-webkit-box-shadow: 0px 0px 2px 0px var(--primary-color, #007ACC);\r\n\t        box-shadow: 0px 0px 2px 0px var(--primary-color, #007ACC);\r\n}\r\n\r\ninput.qp-text-editor[readonly]:focus {\r\n\tborder-width: 1px;\r\n\tbox-shadow: 0px 0px 0px 0px transparent;\r\n\t-webkit-box-shadow: 0px 0px 0px 0px transparent;\r\n\tborder-bottom-color: #D2D4D7;\r\n\r\n\tbackground-color: #F5F7F8;\r\n\tborder-top-color: transparent;\r\n\tborder-left-color: transparent;\r\n\tborder-right-color: transparent;\r\n}\r\n'}));define("text!controls/global/text-editor/qp-text-editor.html",[],(function(){return'<template css="display: ${config.hidden ? \'none\': \'\'};"><require from="./qp-text-editor.css"></require><template if.bind="config.hasEditLink && (!config.enabled || config.readOnly)"><a id="${config.id}" name="${config.name}" class="${config.class} qp-text-editor" tabindex="${config.tabIndex}" href="javascript: void 0" css="text-align: ${align}" enabled.bind="enabled ? null : false & attr"> ${value | meta : converter : false : config} </a></template><template else><textarea if.bind="config.type == 1" id="${config.id}" ref="elemText" name="${config.name}" class="${config.class} qp-text-editor" tabindex="${config.tabIndex}" maxlength.bind="config.maxLength & attr" enabled.bind="config.enabled ? null : false & attr" readonly="${config.readOnly || !config.enabled ? true : null}" spellcheck.bind="config.spellcheck ? null : false & attr" css="text-align: ${align}" placeholder.bind="config.placeholder & attr" wrap.bind="wrap ? \'off\': null & attr" rows.bind="config.rows & attr" cols.bind="config.cols & attr" value.bind="value | meta : converter : hasFocus : config & updateTrigger : \'blur\' : \'update\'" keydown.capture="processKeyDown($event)" focus.trigger="processFocus($event)" blur.trigger="processBlur($event)" paste.delegate="processPaste($event)">\r\n    </textarea> <input if.bind="config.type != 1" type="${textMode}" id="${config.id}" ref="elemText" name="${config.name}" class="${config.class} qp-text-editor" tabindex="${config.tabIndex}" maxlength.bind="config.maxLength & attr" enabled.bind="config.enabled ? null : false & attr" readonly="${config.readOnly || !config.enabled ? true : null}" spellcheck.bind="config.spellcheck ? null : false & attr" css="text-align: ${align}" placeholder.bind="config.placeholder & attr" value.bind="value | meta : converter : hasFocus : config & updateTrigger : \'blur\' : \'update\'" update.capture="processValueUpdate($event)" keydown.capture="processKeyDown($event)" focus.trigger="processFocus($event)" blur.trigger="processBlur($event)" paste.delegate="processPaste($event)"></template></template>'}));define("controls/global/tooltip/qp-extention-cord",["require","exports","tslib","aurelia-framework","plugins/tooltip-service/tooltip-service"],(function(e,t,r,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpExtentionCordCustomAttribute=void 0;var o=function(){function e(e,t,r){this.element=e;this.tooltipService=t;this.tq=r}e.prototype.attached=function(){this.subscribeTo(this.element)};e.prototype.detached=function(){var e;(e=this.subscription)===null||e===void 0?void 0:e.dispose();this.subscription=undefined;this.hide()};e.prototype.subscribeTo=function(e){var t=this;var r;(r=this.subscription)===null||r===void 0?void 0:r.dispose();this.subscription=undefined;this.subscription=this.tooltipService.subscribe(e,{triggerDelay:100,manualShowOnly:this.manualShowOnly,onShow:function(){return t.show()},onHide:function(){return t.hide()}})};e.prototype.forceShowChanged=function(e,t){var r=this;if(e){this.tq.queueTask((function(){r.tooltipService.selfActivate(r.element)}))}else if(t){this.tq.queueTask((function(){r.tooltipService.selfHide(r.element)}))}};e.prototype.show=function(){if(this.clone){this.hide()}var e=this.clone=this.element.cloneNode(true);e.style.position="fixed";var t=this.element.getBoundingClientRect();document.body.appendChild(e);var r=e.getBoundingClientRect().width;if(r<t.width){this.hide()}else{e.style.pointerEvents="none";e.style.top=Math.floor(t.top)+"px";e.style.height=Math.floor(t.height)+"px";e.style.left=t.left+"px";e.classList.add("extention-cord")}};e.prototype.hide=function(){if(this.clone){document.body.removeChild(this.clone)}this.clone=undefined};r.__decorate([n.bindable({primaryProperty:true}),r.__metadata("design:type",Boolean)],e.prototype,"forceShow",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Boolean)],e.prototype,"manualShowOnly",void 0);e=r.__decorate([n.customAttribute("extention-cord"),n.autoinject,r.__metadata("design:paramtypes",[Element,i.TooltipService,n.TaskQueue])],e);return e}();t.QpExtentionCordCustomAttribute=o}));define("controls/global/tooltip/qp-tooltip",["require","exports","tslib","aurelia-framework","aurelia-event-aggregator","plugins/tooltip-service/tooltip-service","plugins/glue/index"],(function(e,t,r,n,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QpTooltipCustomElement=void 0;var s=function(){function e(e,t,r,n){this.tooltipService=e;this.ea=t;this.tq=r;this.element=n;this.showMe=false}e.prototype.targetChanged=function(e){this.subscribeTo(e)};e.prototype.attached=function(){if(!this.target){this.target=this.element.parentElement}this.subscribeTo(this.target);this.tooltipService.selfHide(this.target)};e.prototype.detached=function(){var e;this.hide();(e=this.subscription)===null||e===void 0?void 0:e.dispose();this.subscription=undefined};e.prototype.subscribeTo=function(e){var t=this;var r;(r=this.subscription)===null||r===void 0?void 0:r.dispose();this.subscription=undefined;this.subscription=this.tooltipService.subscribe(e,{elementToIgnore:this.element,onShow:function(){return t.show()},onHide:function(){return t.hide()}})};e.prototype.show=function(){if(this.onShow){this.onShow()}this.showMe=true;this.tq.flushTaskQueue();this.ea.publish(a.COORDINATE_SYSTEM_CHANGED_EVENT_NAME)};e.prototype.hide=function(){this.showMe=false};e.prototype.stopPropagation=function(e){e.stopImmediatePropagation()};r.__decorate([n.bindable,r.__metadata("design:type",HTMLElement)],e.prototype,"target",void 0);r.__decorate([n.bindable,r.__metadata("design:type",Function)],e.prototype,"onShow",void 0);e=r.__decorate([n.customElement("qp-tooltip"),n.autoinject,r.__metadata("design:paramtypes",[o.TooltipService,i.EventAggregator,n.TaskQueue,Element])],e);return e}();t.QpTooltipCustomElement=s}));define("text!controls/global/tooltip/qp-tooltip.css",[],(function(){return".qp-tooltip-container:after {\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\ttop: -16px;\r\n\tborder: 8px solid transparent;\r\n\tcontent: ' ';\r\n\tborder-bottom-color: #007ACC;\r\n\tborder-bottom-color: var(--primary-color, #007ACC);\r\n\t-webkit-transform: translateX(-8px);\r\n\t        transform: translateX(-8px);\r\n}\r\n\r\n.qp-tooltip-container {\r\n\tz-index: 20000;\r\n\r\n\tmin-width: 100%;\r\n\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\r\n\r\n\t-webkit-box-sizing: border-box;\r\n\r\n\r\n\t        box-sizing: border-box;\r\n\t-webkit-transform: translateY(8px);\r\n\t        transform: translateY(8px);\r\n\r\n\tpointer-events: all;\r\n\r\n\tfont-size: 13px;\r\n\tborder-radius: 5px;\r\n\tbackground-color: #007ACC;\r\n\tbackground-color: var(--primary-color, #007ACC);\r\n\tborder: 1px solid #007ACC;\r\n\tborder: 1px solid var(--primary-color, #007ACC);\r\n\tcolor: RGBA(255, 255, 255, 0.87);\r\n\tfont-weight: 700;\r\n\r\n\tpadding: 5px;\r\n\r\n}\r\n"}));define("text!controls/global/tooltip/qp-tooltip.html",[],(function(){return'<template><require from="./qp-tooltip.css"></require><div show.bind="showMe" class="qp-tooltip-container" glue-to.bind="target"><slot></slot></div></template>'}));